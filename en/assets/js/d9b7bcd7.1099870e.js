"use strict";(self.webpackChunklukso_docs=self.webpackChunklukso_docs||[]).push([[7456],{3905:(e,t,o)=>{o.d(t,{Zo:()=>d,kt:()=>m});var a=o(7294);function n(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function r(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,a)}return o}function i(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?r(Object(o),!0).forEach((function(t){n(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):r(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function s(e,t){if(null==e)return{};var o,a,n=function(e,t){if(null==e)return{};var o,a,n={},r=Object.keys(e);for(a=0;a<r.length;a++)o=r[a],t.indexOf(o)>=0||(n[o]=e[o]);return n}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)o=r[a],t.indexOf(o)>=0||Object.prototype.propertyIsEnumerable.call(e,o)&&(n[o]=e[o])}return n}var l=a.createContext({}),p=function(e){var t=a.useContext(l),o=t;return e&&(o="function"==typeof e?e(t):i(i({},t),e)),o},d=function(e){var t=p(e.components);return a.createElement(l.Provider,{value:t},e.children)},c={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},u=a.forwardRef((function(e,t){var o=e.components,n=e.mdxType,r=e.originalType,l=e.parentName,d=s(e,["components","mdxType","originalType","parentName"]),u=p(o),m=n,y=u["".concat(l,".").concat(m)]||u[m]||c[m]||r;return o?a.createElement(y,i(i({ref:t},d),{},{components:o})):a.createElement(y,i({ref:t},d))}));function m(e,t){var o=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var r=o.length,i=new Array(r);i[0]=u;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s.mdxType="string"==typeof e?e:n,i[1]=s;for(var p=2;p<r;p++)i[p]=o[p];return a.createElement.apply(null,i)}return a.createElement.apply(null,o)}u.displayName="MDXCreateElement"},4964:(e,t,o)=>{o.r(t),o.d(t,{assets:()=>l,contentTitle:()=>i,default:()=>c,frontMatter:()=>r,metadata:()=>s,toc:()=>p});var a=o(7462),n=(o(7294),o(3905));const r={sidebar_position:3,title:"Opciones"},i="Objeto de Opciones de Contrato",s={unversionedId:"es/tools/lsp-factoryjs/deployment/options",id:"es/tools/lsp-factoryjs/deployment/options",title:"Opciones",description:"Al desplegar un Perfil Universal o un Activo Digital, cada contrato inteligente puede configurarse individualmente pasando un objeto de configuraci\xf3n de contrato al par\xe1metro options de la funci\xf3n deploy.",source:"@site/docs/es/tools/lsp-factoryjs/deployment/options.md",sourceDirName:"es/tools/lsp-factoryjs/deployment",slug:"/es/tools/lsp-factoryjs/deployment/options",permalink:"/lukso-es/en/es/tools/lsp-factoryjs/deployment/options",draft:!1,editUrl:"https://github.com/lukso-network/docs/tree/main/docs/es/tools/lsp-factoryjs/deployment/options.md",tags:[],version:"current",lastUpdatedAt:1680495619,formattedLastUpdatedAt:"Apr 3, 2023",sidebarPosition:3,frontMatter:{sidebar_position:3,title:"Opciones"},sidebar:"toolsSidebar",previous:{title:"Activo Digital",permalink:"/lukso-es/en/es/tools/lsp-factoryjs/deployment/digital-asset"},next:{title:"UniversalProfile",permalink:"/lukso-es/en/es/tools/lsp-factoryjs/classes/universal-profile"}},l={},p=[{value:"Par\xe1metros",id:"par\xe1metros",level:2},{value:"Versi\xf3n",id:"versi\xf3n",level:3},{value:"Direcci\xf3n de contrato base personalizada",id:"direcci\xf3n-de-contrato-base-personalizada",level:4},{value:"Versiones de Contrato",id:"versiones-de-contrato",level:4},{value:"Despliegue de Bytecode Personalizado",id:"despliegue-de-bytecode-personalizado",level:4},{value:"Despliegue Proxy",id:"despliegue-proxy",level:3},{value:"Ejemplos",id:"ejemplos",level:2}],d={toc:p};function c(e){let{components:t,...o}=e;return(0,n.kt)("wrapper",(0,a.Z)({},d,o,{components:t,mdxType:"MDXLayout"}),(0,n.kt)("h1",{id:"objeto-de-opciones-de-contrato"},"Objeto de Opciones de Contrato"),(0,n.kt)("p",null,"Al desplegar un Perfil Universal o un Activo Digital, cada contrato inteligente puede configurarse individualmente pasando un objeto de configuraci\xf3n de contrato al par\xe1metro options de la funci\xf3n ",(0,n.kt)("inlineCode",{parentName:"p"},"deploy"),"."),(0,n.kt)("h2",{id:"par\xe1metros"},"Par\xe1metros"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",{parentName:"tr",align:"left"},"Nombre"),(0,n.kt)("th",{parentName:"tr",align:"left"},"Tipo"),(0,n.kt)("th",{parentName:"tr",align:"left"},"Descripci\xf3n"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:"left"},(0,n.kt)("a",{parentName:"td",href:"/lukso-es/en/es/tools/lsp-factoryjs/deployment/options#version"},(0,n.kt)("inlineCode",{parentName:"a"},"version"))," (opcional)"),(0,n.kt)("td",{parentName:"tr",align:"left"},"Cadena"),(0,n.kt)("td",{parentName:"tr",align:"left"},"Establece qu\xe9 versi\xf3n del contrato inteligente debe desplegarse. Puede ser un ",(0,n.kt)("a",{parentName:"td",href:"/lukso-es/en/es/tools/lsp-factoryjs/deployment/options#contract-versions"},"n\xfamero de versi\xf3n"),", ",(0,n.kt)("a",{parentName:"td",href:"/lukso-es/en/es/tools/lsp-factoryjs/deployment/options#custom-base-contract-address"},"direcci\xf3n del contrato base"),", o ",(0,n.kt)("a",{parentName:"td",href:"#deploying-custom-bytecode"},"custom bytecode"),". Por defecto es la \xfaltima versi\xf3n disponible en el ",(0,n.kt)("a",{parentName:"td",href:"https://github.com/lukso-network/tools-lsp-factory/blob/main/src/versions.json"},"archivo de versiones"),".")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:"left"},(0,n.kt)("a",{parentName:"td",href:"/lukso-es/en/es/tools/lsp-factoryjs/deployment/options#deploy-proxy"},(0,n.kt)("inlineCode",{parentName:"a"},"deployProxy"))," (opcional)"),(0,n.kt)("td",{parentName:"tr",align:"left"},"Booleano"),(0,n.kt)("td",{parentName:"tr",align:"left"},"Determina si el contrato se desplegar\xe1 como un ",(0,n.kt)("strong",{parentName:"td"},"contrato proxy m\xednimo")," basado en ",(0,n.kt)("a",{parentName:"td",href:"https://eips.ethereum.org/EIPS/eip-1167"},"EIP1167")," o como un contrato completo con un constructor.")))),(0,n.kt)("h3",{id:"versi\xf3n"},"Versi\xf3n"),(0,n.kt)("p",null,"Bajo el par\xe1metro ",(0,n.kt)("inlineCode",{parentName:"p"},"version")," los desarrolladores pueden especificar un ",(0,n.kt)("a",{parentName:"p",href:"./options#contract-versions"},"n\xfamero de versi\xf3n"),", ",(0,n.kt)("a",{parentName:"p",href:"/lukso-es/en/es/tools/lsp-factoryjs/deployment/options#deploying-custom-bytecode"},"custom bytecode")," o una ",(0,n.kt)("a",{parentName:"p",href:"/lukso-es/en/es/tools/lsp-factoryjs/deployment/options#custom-base-contract-address"},"direcci\xf3n de contrato base")," que se utilizar\xe1 para el despliegue del contrato inteligente."),(0,n.kt)("h4",{id:"direcci\xf3n-de-contrato-base-personalizada"},"Direcci\xf3n de contrato base personalizada"),(0,n.kt)("p",null,"Cuando se utiliza ",(0,n.kt)("a",{parentName:"p",href:"/lukso-es/en/es/tools/lsp-factoryjs/deployment/options#deploy-proxy"},"despliegue proxy")," los desarrolladores pueden pasar una direcci\xf3n al par\xe1metro ",(0,n.kt)("inlineCode",{parentName:"p"},"version")," para especificar la direcci\xf3n del contrato tipo del que heredar\xe1 su l\xf3gica el contrato proxy. El contrato tipo puede contener l\xf3gica personalizada en funci\xf3n de un caso de uso espec\xedfico."),(0,n.kt)("p",null,"LSPFactory desplegar\xe1 entonces un contrato proxy que hereda su l\xf3gica a partir de la direcci\xf3n del contrato tipo especificada."),(0,n.kt)("admonition",{type:"info"},(0,n.kt)("p",{parentName:"admonition"},"Cualquier direcci\xf3n de contrato tipo que los desarrolladores pasen aqu\xed debe adherirse al est\xe1ndar de contrato LSP relevante para el que se est\xe1 utilizando.")),(0,n.kt)("p",null,"M\xe1s informaci\xf3n sobre el despliegue de proxy ",(0,n.kt)("a",{parentName:"p",href:"./options#deploy-proxy"},"aqu\xed"),"."),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-javascript",metastring:'title="Despliegue de un Activo Digital LSP7 utilizando una direcci\xf3n de contrato tipo espec\xedfica"',title:'"Despliegue',de:!0,un:!0,Activo:!0,Digital:!0,LSP7:!0,utilizando:!0,una:!0,"direcci\xf3n":!0,contrato:!0,tipo:!0,'espec\xedfica"':!0},"await lspFactory.LSP7DigitalAsset.deploy({...}, {\n    LSP7DigitalAsset: {\n        version: '0x00b1d454Eb5d917253FD6cb4D5560dEC30b0960c',\n        deployProxy: true\n    }\n});\n")),(0,n.kt)("h4",{id:"versiones-de-contrato"},"Versiones de Contrato"),(0,n.kt)("p",null,"LSPFactory almacena las direcciones de las diferentes versiones del contrato base ",(0,n.kt)("a",{parentName:"p",href:"https://github.com/lukso-network/tools-lsp-factory/blob/main/src/versions.json"},"internamente"),". Especificando un n\xfamero de ",(0,n.kt)("inlineCode",{parentName:"p"},"versi\xf3n"),", los desarrolladores pueden especificar qu\xe9 versi\xf3n de contrato tipo debe utilizarse durante el despliegue. El n\xfamero de versi\xf3n refleja la versi\xf3n del paquete de la librer\xeda ",(0,n.kt)("a",{parentName:"p",href:"https://github.com/lukso-network/tools-lsp-factory/releases"},"lsp-smart-contracts")," utilizada para desplegar el contrato tipo."),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-javascript"},"await lspFactory.LSP8IdentifiableDigitalAsset.deploy({...}, {\n    LSP7DigitalAsset: {\n        version: '0.5.0',\n        deployProxy: true\n    }\n});\n")),(0,n.kt)("h4",{id:"despliegue-de-bytecode-personalizado"},"Despliegue de Bytecode Personalizado"),(0,n.kt)("p",null,"Los desarrolladores pueden desplegar una implementaci\xf3n de contrato personalizada pasando alg\xfan bytecode de creaci\xf3n compilado al par\xe1metro ",(0,n.kt)("inlineCode",{parentName:"p"},"version"),"."),(0,n.kt)("p",null,"Puede tratarse del bytecode de instanciaci\xf3n de una implementaci\xf3n est\xe1ndar LSP personalizada escrita de acuerdo con un caso de uso personalizado. La implementaci\xf3n debe cumplir los requisitos necesarios del est\xe1ndar LSP."),(0,n.kt)("admonition",{type:"note"},(0,n.kt)("p",{parentName:"admonition"},"Los contratos desplegados desde bytecode personalizado no utilizar\xe1n ning\xfan proxy de despliegue de contratos.")),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-javascript",metastring:'title="Despliegue de un Activo digital LSP8 a partir de bytecode personalizado"',title:'"Despliegue',de:!0,un:!0,Activo:!0,digital:!0,LSP8:!0,a:!0,partir:!0,bytecode:!0,'personalizado"':!0},"lspFactory.UniversalProfile.deploy({...}, {\n  LSP6KeyManager: {\n    version: '0x...',\n  },\n})\n")),(0,n.kt)("h3",{id:"despliegue-proxy"},"Despliegue Proxy"),(0,n.kt)("p",null,"LSPFactory utiliza el despliegue proxy de contratos inteligentes para maximizar la eficiencia del gas. Esto puede configurarse pasando el par\xe1metro ",(0,n.kt)("inlineCode",{parentName:"p"},"deployProxy")," para determinar si un contrato debe desplegarse como un ",(0,n.kt)("strong",{parentName:"p"},"contrato proxy m\xednimo")," basado en ",(0,n.kt)("a",{parentName:"p",href:"https://eips.ethereum.org/EIPS/eip-1167"},"EIP1167")," o un contrato completo con un constructor."),(0,n.kt)("p",null,"Un contrato proxy es un contrato ligero que hereda su l\xf3gica haciendo referencia a la direcci\xf3n de un contrato tipo ya desplegado en la blockchain. La herencia permite un despliegue m\xe1s barato porque la l\xf3gica del contrato inteligente ya ha sido desplegada en el contrato tipo."),(0,n.kt)("admonition",{type:"info"},(0,n.kt)("p",{parentName:"admonition"},"LSPFactory almacena direcciones de contratos tipo para diferentes versiones ",(0,n.kt)("a",{parentName:"p",href:"https://github.com/lukso-network/tools-lsp-factory/blob/main/src/versions.json"},"internamente")," y utilizar\xe1 la \xfaltima versi\xf3n de contrato tipo disponible si no se especifica ninguna versi\xf3n.")),(0,n.kt)("p",null,"Cuando se utiliza el despliegue proxy, LSPFactory comprobar\xe1 que hay alg\xfan bytecode desplegado en la direcci\xf3n del contrato tipo antes de realizar el despliegue. Si no se encuentra ninguno, se desplegar\xe1 un nuevo contrato tipo al que se har\xe1 referencia en el contrato proxy. Este proceso es \xfatil cuando se utiliza LSPFactory en una red de desarrollo local como Hardhat, donde no habr\xe1 contratos tipo desplegados previamente."),(0,n.kt)("p",null,"Cuando se utiliza el despliegue proxy, los desarrolladores pueden especificar la direcci\xf3n del contrato tipo pasando el par\xe1metro ",(0,n.kt)("a",{parentName:"p",href:"/lukso-es/en/es/tools/lsp-factoryjs/deployment/options#version"},(0,n.kt)("inlineCode",{parentName:"a"},"version")),". Esto permite desplegar una implementaci\xf3n de contrato espec\xedfica desplegando un contrato proxy que hereda su l\xf3gica de un contrato tipo personalizado previamente desplegado."),(0,n.kt)("p",null,"El valor predeterminado de ",(0,n.kt)("inlineCode",{parentName:"p"},"deployProxy")," es ",(0,n.kt)("inlineCode",{parentName:"p"},"true")," para todos los contratos excepto ",(0,n.kt)("inlineCode",{parentName:"p"},"LSP1UniversalReceiverDelegate")," cuando se despliega un Perfil Universal (",(0,n.kt)("a",{parentName:"p",href:"/lukso-es/en/es/tools/lsp-factoryjs/deployment/universal-profile#universal-receiver-delegate-proxy-deployment"},"leer m\xe1s"),")."),(0,n.kt)("admonition",{type:"info"},(0,n.kt)("p",{parentName:"admonition"},"Si ",(0,n.kt)("inlineCode",{parentName:"p"},"deployProxy")," se establece en ",(0,n.kt)("inlineCode",{parentName:"p"},"false"),", el contrato inteligente se desplegar\xe1 desde la versi\xf3n actual de la librer\xeda ",(0,n.kt)("a",{parentName:"p",href:"https://github.com/lukso-network/lsp-smart-contracts"},"lsp-smart-contracts"),".")),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-javascript",metastring:'title="Despliegue de un Perfil Universal utilizando un contrato ERC725Account completo con constructor"',title:'"Despliegue',de:!0,un:!0,Perfil:!0,Universal:!0,utilizando:!0,contrato:!0,ERC725Account:!0,completo:!0,con:!0,'constructor"':!0},"lspFactory.UniversalProfile.deploy({...}, {\n  ERC725Account: {\n    deployProxy: false,\n  },\n})\n")),(0,n.kt)("h2",{id:"ejemplos"},"Ejemplos"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-js",metastring:'title="Pasar las opciones de contrato del Perfil Universal"',title:'"Pasar',las:!0,opciones:!0,de:!0,contrato:!0,del:!0,Perfil:!0,'Universal"':!0},"await lspFactory.UniversalProfile.deploy({...}, {\n    ERC725Account: {\n        version: '0.5.0',\n        deployProxy: true\n    },\n    LSP6Keymanager: {\n        version: '0x...', // C\xf3digo byte personalizado\n        deployProxy: false\n    },\n    LSP1UniversalReceiverDelegate: {\n        version: '0x87cd003F9Ac7d6eBcd811f7b427c7dBF6f6ba132', // Direcci\xf3n personalizada del contrato tipo\n        deployProxy: true\n    },\n})\n")),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-js",metastring:'title="Pasar opciones de contrato LSP7DigitalAsset"',title:'"Pasar',opciones:!0,de:!0,contrato:!0,'LSP7DigitalAsset"':!0},"await lspFactory.LSP7DigitalAsset.deploy({...}, {\n    LSP7DigitalAsset: {\n        version: '0x...', // C\xf3digo byte personalizado\n        deployProxy: false\n    },\n})\n")),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-js",metastring:'title="Pasar opciones de contrato LSP8IdentifiableDigitalAsset"',title:'"Pasar',opciones:!0,de:!0,contrato:!0,'LSP8IdentifiableDigitalAsset"':!0},"await lspFactory.LSP8IdentifiableDigitalAsset.deploy({...}, {\n    LSP8IdentifiableDigitalAsset: {\n        version: '0x87cd003F9Ac7d6eBcd811f7b427c7dBF6f6ba132', // Direcci\xf3n personalizada del contrato tipo\n        deployProxy: true\n    },\n})\n")))}c.isMDXComponent=!0}}]);