"use strict";(self.webpackChunklukso_docs=self.webpackChunklukso_docs||[]).push([[950],{3905:(e,a,t)=>{t.d(a,{Zo:()=>d,kt:()=>m});var n=t(7294);function r(e,a,t){return a in e?Object.defineProperty(e,a,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[a]=t,e}function s(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);a&&(n=n.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),t.push.apply(t,n)}return t}function i(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?s(Object(t),!0).forEach((function(a){r(e,a,t[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):s(Object(t)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))}))}return e}function l(e,a){if(null==e)return{};var t,n,r=function(e,a){if(null==e)return{};var t,n,r={},s=Object.keys(e);for(n=0;n<s.length;n++)t=s[n],a.indexOf(t)>=0||(r[t]=e[t]);return r}(e,a);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)t=s[n],a.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}var o=n.createContext({}),c=function(e){var a=n.useContext(o),t=a;return e&&(t="function"==typeof e?e(a):i(i({},a),e)),t},d=function(e){var a=c(e.components);return n.createElement(o.Provider,{value:a},e.children)},p={inlineCode:"code",wrapper:function(e){var a=e.children;return n.createElement(n.Fragment,{},a)}},u=n.forwardRef((function(e,a){var t=e.components,r=e.mdxType,s=e.originalType,o=e.parentName,d=l(e,["components","mdxType","originalType","parentName"]),u=c(t),m=r,k=u["".concat(o,".").concat(m)]||u[m]||p[m]||s;return t?n.createElement(k,i(i({ref:a},d),{},{components:t})):n.createElement(k,i({ref:a},d))}));function m(e,a){var t=arguments,r=a&&a.mdxType;if("string"==typeof e||r){var s=t.length,i=new Array(s);i[0]=u;var l={};for(var o in a)hasOwnProperty.call(a,o)&&(l[o]=a[o]);l.originalType=e,l.mdxType="string"==typeof e?e:r,i[1]=l;for(var c=2;c<s;c++)i[c]=t[c];return n.createElement.apply(null,i)}return n.createElement.apply(null,t)}u.displayName="MDXCreateElement"},9400:(e,a,t)=>{t.r(a),t.d(a,{assets:()=>o,contentTitle:()=>i,default:()=>p,frontMatter:()=>s,metadata:()=>l,toc:()=>c});var n=t(7462),r=(t(7294),t(3905));const s={sidebar_label:"LSP1 - Receptor Delegado Universal",sidebar_position:2},i="LSP1 - Receptor Delegado Universal",l={unversionedId:"es/standards/generic-standards/lsp1-universal-receiver-delegate",id:"es/standards/generic-standards/lsp1-universal-receiver-delegate",title:"LSP1 - Receptor Delegado Universal",description:"LSP1 - Receptor Delegado Universal",source:"@site/docs/es/standards/generic-standards/lsp1-universal-receiver-delegate.md",sourceDirName:"es/standards/generic-standards",slug:"/es/standards/generic-standards/lsp1-universal-receiver-delegate",permalink:"/lukso-es/en/es/standards/generic-standards/lsp1-universal-receiver-delegate",draft:!1,editUrl:"https://github.com/lukso-network/docs/tree/main/docs/es/standards/generic-standards/lsp1-universal-receiver-delegate.md",tags:[],version:"current",lastUpdatedAt:1681103476,formattedLastUpdatedAt:"Apr 10, 2023",sidebarPosition:2,frontMatter:{sidebar_label:"LSP1 - Receptor Delegado Universal",sidebar_position:2},sidebar:"standardsSidebar",previous:{title:"LSP1 - Receptor Universal",permalink:"/lukso-es/en/es/standards/generic-standards/lsp1-universal-receiver"},next:{title:"LSP14 - Propiedad 2-Pasos",permalink:"/lukso-es/en/es/standards/generic-standards/lsp14-ownable-2-step"}},o={},c=[{value:"Introducci\xf3n",id:"introducci\xf3n",level:2},{value:"\xbfQu\xe9 representa esta norma?",id:"qu\xe9-representa-esta-norma",level:2},{value:"Especificaci\xf3n",id:"especificaci\xf3n",level:3},{value:"C\xf3mo funciona la delegaci\xf3n",id:"c\xf3mo-funciona-la-delegaci\xf3n",level:3},{value:"Implementaciones",id:"implementaciones",level:2},{value:"Escenario de transferencia de Tokens",id:"escenario-de-transferencia-de-tokens",level:3},{value:"Referencias",id:"referencias",level:2}],d={toc:c};function p(e){let{components:a,...s}=e;return(0,r.kt)("wrapper",(0,n.Z)({},d,s,{components:a,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"lsp1---receptor-delegado-universal"},"LSP1 - Receptor Delegado Universal"),(0,r.kt)("admonition",{title:"Documento Est\xe1ndard",type:"info"},(0,r.kt)("p",{parentName:"admonition"},(0,r.kt)("a",{parentName:"p",href:"https://github.com/lukso-network/LIPs/blob/main/LSPs/LSP-1-UniversalReceiver.md#specification-of-the-universalreceiverdelegate"},"LSP1 - Receptor Delegado Universal"))),(0,r.kt)("admonition",{title:"Sugerencia",type:"success"},(0,r.kt)("p",{parentName:"admonition"},"Para comprender mejor este est\xe1ndar, se recomienda consultar primero el est\xe1ndar de origen ",(0,r.kt)("strong",{parentName:"p"},(0,r.kt)("a",{parentName:"strong",href:"/lukso-es/en/es/standards/generic-standards/lsp1-universal-receiver"},"LSP1-ReceptorUniversal")),".")),(0,r.kt)("h2",{id:"introducci\xf3n"},"Introducci\xf3n"),(0,r.kt)("p",null,"Una vez desplegado, el c\xf3digo de un contrato inteligente ",(0,r.kt)("strong",{parentName:"p"},"no puede ser modificado"),". Sin embargo, los constructores pueden decidir c\xf3mo sus contratos inteligentes implementan la funci\xf3n ",(0,r.kt)("a",{parentName:"p",href:"/lukso-es/en/es/standards/smart-contracts/lsp0-erc725-account#universalreceiver"},(0,r.kt)("inlineCode",{parentName:"a"},"universalReceiver(...)")),". Este est\xe1ndar permite a cualquier contrato inteligente externo cambiar las relaciones del contrato principal para cambiar el comportamiento de la funci\xf3n."),(0,r.kt)("p",null,"Por lo tanto, se aconseja no programar c\xf3mo el contrato inteligente debe manejar y reaccionar a llamadas espec\xedficas dentro de la funci\xf3n ",(0,r.kt)("inlineCode",{parentName:"p"},"universalReceiver(...)"),". En su lugar, deber\xeda delegar esta funcionalidad a otro contrato externo. Los desarrolladores podr\xedan entonces personalizar dichos contratos para implementar una l\xf3gica espec\xedfica que sea ",(0,r.kt)("strong",{parentName:"p"},"canjeable en cualquier momento a trav\xe9s de una actualizaci\xf3n"),"."),(0,r.kt)("h2",{id:"qu\xe9-representa-esta-norma"},"\xbfQu\xe9 representa esta norma?"),(0,r.kt)("h3",{id:"especificaci\xf3n"},"Especificaci\xf3n"),(0,r.kt)("admonition",{title:"Sugerencia",type:"success"},(0,r.kt)("p",{parentName:"admonition"},"Los contratos inteligentes que implementen el est\xe1ndar ",(0,r.kt)("a",{parentName:"p",href:"#"},"LSP1-ReceptorDelegadoUniversal")," DEBER\xcdAN ",(0,r.kt)("strong",{parentName:"p"},"registrar")," el ",(0,r.kt)("strong",{parentName:"p"},(0,r.kt)("a",{parentName:"strong",href:"/lukso-es/en/es/standards/smart-contracts/interface-ids"},"IdDeInterfazDeReceptorDelegadoUniversalLSP1")," utilizando ERC165"),". De esta forma, otros contratos pueden saber que el contrato soporta el est\xe1ndar LSP1.")),(0,r.kt)("p",null,"Este est\xe1ndar define un contrato llamado ",(0,r.kt)("strong",{parentName:"p"},"ReceptorDelegadoUniversal")," que contiene una \xfanica funci\xf3n llamada ",(0,r.kt)("inlineCode",{parentName:"p"},"universalReceiverDelegate(...)")," que debe ser llamada por la funci\xf3n ",(0,r.kt)("inlineCode",{parentName:"p"},"universalReceiver(..)")," con:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"address ",(0,r.kt)("inlineCode",{parentName:"p"},"caller"),": la direcci\xf3n que llam\xf3 inicialmente a la funci\xf3n ",(0,r.kt)("inlineCode",{parentName:"p"},"universalReceiver(...)"),".")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"uint256 ",(0,r.kt)("inlineCode",{parentName:"p"},"value"),": la cantidad de valor enviada a la funci\xf3n ",(0,r.kt)("inlineCode",{parentName:"p"},"universalReceiver(...)"),".")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"bytes32 ",(0,r.kt)("inlineCode",{parentName:"p"},"typeId"),": el typeId pasado a la funci\xf3n ",(0,r.kt)("inlineCode",{parentName:"p"},"universalReceiver(...)"),".")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"bytes ",(0,r.kt)("inlineCode",{parentName:"p"},"data"),": los datos pasados a la funci\xf3n ",(0,r.kt)("inlineCode",{parentName:"p"},"universalReceiver(...)"),"."))),(0,r.kt)("h3",{id:"c\xf3mo-funciona-la-delegaci\xf3n"},"C\xf3mo funciona la delegaci\xf3n"),(0,r.kt)("p",null,"La direcci\xf3n del contrato ",(0,r.kt)("strong",{parentName:"p"},(0,r.kt)("a",{parentName:"strong",href:"/lukso-es/en/es/standards/smart-contracts/lsp1-universal-receiver-delegate-up"},"ReceptorDelegadoUniversal"))," puede almacenarse dentro del almacenamiento del contrato que delega su funcionalidad ",(0,r.kt)("inlineCode",{parentName:"p"},"universalReceiver(...)"),". Esto permite la actualizaci\xf3n del ",(0,r.kt)("strong",{parentName:"p"},"ReceptorDelegadoUniversal")," simplemente cambiando la direcci\xf3n (en el almacenamiento) a otro ReceptorDelegadoUniversal que contenga una nueva l\xf3gica."),(0,r.kt)("p",null,"Si el contrato que implementa el ",(0,r.kt)("inlineCode",{parentName:"p"},"universalReceiver(..)")," admite ",(0,r.kt)("strong",{parentName:"p"},(0,r.kt)("a",{parentName:"strong",href:"https://github.com/ERC725Alliance/erc725/blob/main/docs/ERC-725.md#erc725y"},"Almac\xe9n de clave-valor de datos ERC725Y")),", la direcci\xf3n del ",(0,r.kt)("strong",{parentName:"p"},"contrato externo")," DEBE establecerse como valor para la ",(0,r.kt)("strong",{parentName:"p"},"clave de datos LSP1ReceptorDelegadoUniversal")," que se muestra a continuaci\xf3n para habilitar la ampliaci\xf3n opcional. Este par clave-valor actuar\xe1 como referencia, haciendo que este contrato externo sea actualizable en caso necesario."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "name": "LSP1UniversalReceiverDelegate",\n  "key": "0x0cfc51aec37c55a4d0b1a65c6255c4bf2fbdf6277f3cc0730c45b828b6db8b47",\n  "keyType": "Singleton",\n  "valueType": "address",\n  "valueContent": "Address"\n}\n')),(0,r.kt)("p",null,"Consulta ",(0,r.kt)("strong",{parentName:"p"},(0,r.kt)("a",{parentName:"strong",href:"/lukso-es/en/es/standards/generic-standards/lsp2-json-schema"},"LSP2-EsquemaJSONERC725Y"))," para obtener m\xe1s informaci\xf3n sobre el esquema JSON."),(0,r.kt)("h2",{id:"implementaciones"},"Implementaciones"),(0,r.kt)("p",null,"Existen varias implementaciones del est\xe1ndar. El contrato ",(0,r.kt)("strong",{parentName:"p"},(0,r.kt)("a",{parentName:"strong",href:"/lukso-es/en/es/standards/smart-contracts/lsp1-universal-receiver-delegate-up"},"LSP1ReceptorDelegadoUniversalUP"))," es una de ellas y se utiliza como delegado de la funci\xf3n ",(0,r.kt)("inlineCode",{parentName:"p"},"universalReceiver(...)")," del contrato ",(0,r.kt)("strong",{parentName:"p"},"PerfilUniversal"),"."),(0,r.kt)("p",null,"Por el momento, este contrato permite"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"recibir y enviar tokens y vaults"),(0,r.kt)("li",{parentName:"ul"},"registrar las claves de datos que los representan seg\xfan las normas ",(0,r.kt)("strong",{parentName:"li"},(0,r.kt)("a",{parentName:"strong",href:"https://github.com/lukso-network/LIPs/blob/main/LSPs/LSP-5-ReceivedAssets.md"},"LSP5-ActivosRecibidos"))," y ",(0,r.kt)("strong",{parentName:"li"},(0,r.kt)("a",{parentName:"strong",href:"https://github.com/lukso-network/LIPs/blob/main/LSPs/LSP-10-ReceivedVaults.md"},"LSP10-B\xf3vedasRecibidas")),".")),(0,r.kt)("h3",{id:"escenario-de-transferencia-de-tokens"},"Escenario de transferencia de Tokens"),(0,r.kt)("p",null,"Un escenario posible es el de una transferencia de tokens entre Alice y Bob. Alice quiere transferir un token propiedad de su Perfil Universal al Perfil Universal de su amigo Bob."),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"1.")," Llama a la funci\xf3n ",(0,r.kt)("strong",{parentName:"p"},(0,r.kt)("inlineCode",{parentName:"strong"},"transfer(...)"))," en el contrato de token a trav\xe9s del ",(0,r.kt)("a",{parentName:"p",href:"/lukso-es/en/es/standards/smart-contracts/lsp6-key-manager"},"Gestor de Claves"),"."),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"executing transfer function",src:t(6374).Z,width:"1542",height:"648"})),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"2.")," La funci\xf3n ",(0,r.kt)("inlineCode",{parentName:"p"},"transfer(...)")," del contrato de tokens ",(0,r.kt)("strong",{parentName:"p"},"activar\xe1 directamente un gancho")," que llamar\xe1 a la funci\xf3n ",(0,r.kt)("inlineCode",{parentName:"p"},"universalReceiver(...)")," de los Perfiles Universales del remitente y del destinatario."),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"token contract hooks calling universalReceiver function",src:t(584).Z,width:"1706",height:"585"})),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"3.")," Si se establece el contrato ",(0,r.kt)("strong",{parentName:"p"},"ReceptorDelegadoUniversal"),", ser\xe1 llamado por la funci\xf3n ",(0,r.kt)("inlineCode",{parentName:"p"},"universalReceiver(...)")," y ejecutar\xe1 su l\xf3gica personalizada."),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"universalReceiver function calling UniversalReceiverDelegate contract",src:t(5846).Z,width:"1358",height:"736"})),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"4.")," El ",(0,r.kt)("strong",{parentName:"p"},"ReceptorDelegadoUniversal")," del ",(0,r.kt)("strong",{parentName:"p"},"Perfil Universal")," permite transferir y establecer ",(0,r.kt)("strong",{parentName:"p"},(0,r.kt)("a",{parentName:"strong",href:"https://github.com/lukso-network/LIPs/blob/main/LSPs/LSP-5-ReceivedAssets.md"},"LSP5-ActivosRecibidos"))," claves de datos en ambos Perfiles a trav\xe9s del Gestor de Claves."),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"UniversalReceiverDelegate setting data keys on profile",src:t(4368).Z,width:"1410",height:"610"})),(0,r.kt)("h2",{id:"referencias"},"Referencias"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://github.com/lukso-network/LIPs/blob/main/LSPs/LSP-1-UniversalReceiver.md"},"Propuestas de Est\xe1ndares LUKSO: LSP1 - Receptor Delegado Universal (Especificaci\xf3n est\xe1ndar, GitHub)")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://github.com/lukso-network/lsp-universalprofile-smart-contracts/tree/develop/contracts/LSP1UniversalReceiver"},"LSP1 Receptor Delegado Universal: implementaciones de Solidity (GitHub)"))))}p.isMDXComponent=!0},6374:(e,a,t)=>{t.d(a,{Z:()=>n});const n=t.p+"assets/images/token-transfer-1-ee415d051d1dd02035f140209e18d455.jpg"},584:(e,a,t)=>{t.d(a,{Z:()=>n});const n=t.p+"assets/images/token-transfer-2-0b3dd968027ecc8d6cb4b6973063ae1e.jpg"},5846:(e,a,t)=>{t.d(a,{Z:()=>n});const n=t.p+"assets/images/token-transfer-3-12192e22a67a38d9d9c9dfc5bbd7ee1d.jpg"},4368:(e,a,t)=>{t.d(a,{Z:()=>n});const n=t.p+"assets/images/token-transfer-4-7db56efafbc48ac08f9d8a37985e31de.jpg"}}]);