"use strict";(self.webpackChunklukso_docs=self.webpackChunklukso_docs||[]).push([[8526],{3905:(e,a,n)=>{n.d(a,{Zo:()=>d,kt:()=>m});var t=n(7294);function r(e,a,n){return a in e?Object.defineProperty(e,a,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[a]=n,e}function i(e,a){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);a&&(t=t.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),n.push.apply(n,t)}return n}function o(e){for(var a=1;a<arguments.length;a++){var n=null!=arguments[a]?arguments[a]:{};a%2?i(Object(n),!0).forEach((function(a){r(e,a,n[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))}))}return e}function l(e,a){if(null==e)return{};var n,t,r=function(e,a){if(null==e)return{};var n,t,r={},i=Object.keys(e);for(t=0;t<i.length;t++)n=i[t],a.indexOf(n)>=0||(r[n]=e[n]);return r}(e,a);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(t=0;t<i.length;t++)n=i[t],a.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var s=t.createContext({}),c=function(e){var a=t.useContext(s),n=a;return e&&(n="function"==typeof e?e(a):o(o({},a),e)),n},d=function(e){var a=c(e.components);return t.createElement(s.Provider,{value:a},e.children)},p={inlineCode:"code",wrapper:function(e){var a=e.children;return t.createElement(t.Fragment,{},a)}},u=t.forwardRef((function(e,a){var n=e.components,r=e.mdxType,i=e.originalType,s=e.parentName,d=l(e,["components","mdxType","originalType","parentName"]),u=c(n),m=r,f=u["".concat(s,".").concat(m)]||u[m]||p[m]||i;return n?t.createElement(f,o(o({ref:a},d),{},{components:n})):t.createElement(f,o({ref:a},d))}));function m(e,a){var n=arguments,r=a&&a.mdxType;if("string"==typeof e||r){var i=n.length,o=new Array(i);o[0]=u;var l={};for(var s in a)hasOwnProperty.call(a,s)&&(l[s]=a[s]);l.originalType=e,l.mdxType="string"==typeof e?e:r,o[1]=l;for(var c=2;c<i;c++)o[c]=n[c];return t.createElement.apply(null,o)}return t.createElement.apply(null,n)}u.displayName="MDXCreateElement"},4694:(e,a,n)=>{n.r(a),n.d(a,{assets:()=>s,contentTitle:()=>o,default:()=>p,frontMatter:()=>i,metadata:()=>l,toc:()=>c});var t=n(7462),r=(n(7294),n(3905));const i={sidebar_label:"Editar un Perfil Universal",sidebar_position:3},o="Editar un Perfil Universal",l={unversionedId:"es/guides/universal-profile/edit-profile",id:"es/guides/universal-profile/edit-profile",title:"Editar un Perfil Universal",description:"Para seguir esta gu\xeda necesitar\xe1s un Perfil Universal que puedas controlar a trav\xe9s de su Gestor de Claves.",source:"@site/docs/es/guides/universal-profile/edit-profile.md",sourceDirName:"es/guides/universal-profile",slug:"/es/guides/universal-profile/edit-profile",permalink:"/lukso-es/en/es/guides/universal-profile/edit-profile",draft:!1,editUrl:"https://github.com/lukso-network/docs/tree/main/docs/es/guides/universal-profile/edit-profile.md",tags:[],version:"current",lastUpdatedAt:1680495619,formattedLastUpdatedAt:"Apr 3, 2023",sidebarPosition:3,frontMatter:{sidebar_label:"Editar un Perfil Universal",sidebar_position:3},sidebar:"guidesSidebar",previous:{title:"Leer Datos del Perfil",permalink:"/lukso-es/en/es/guides/universal-profile/read-profile-data"},next:{title:"Transferir LYX",permalink:"/lukso-es/en/es/guides/universal-profile/transfer-lyx"}},s={},c=[{value:"Introducci\xf3n",id:"introducci\xf3n",level:2},{value:"Configuraci\xf3n",id:"configuraci\xf3n",level:2},{value:"Paso 1 - Crear un nuevo archivo JSON LSP3Profile",id:"paso-1---crear-un-nuevo-archivo-json-lsp3profile",level:2},{value:"1.1 - A\xf1adir detalles del perfil (enlaces, etiquetas, etc.)",id:"11---a\xf1adir-detalles-del-perfil-enlaces-etiquetas-etc",level:3},{value:"1.2 - A\xf1adir una imagen de perfil y de fondo",id:"12---a\xf1adir-una-imagen-de-perfil-y-de-fondo",level:3},{value:"Paso 2 - Subir el archivo JSON a IPFS",id:"paso-2---subir-el-archivo-json-a-ipfs",level:2},{value:"Paso 3 - Configurar erc725.js y cifrar los datos de LSP3Profile",id:"paso-3---configurar-erc725js-y-cifrar-los-datos-de-lsp3profile",level:2},{value:"Paso 4 - Editar el Perfil Universal",id:"paso-4---editar-el-perfil-universal",level:2},{value:"4.1 - Cargar una EOA",id:"41---cargar-una-eoa",level:3},{value:"4.2 - Crear instancias de Contratos",id:"42---crear-instancias-de-contratos",level:3},{value:"4.3 - Establecer datos en el Perfil Universal",id:"43---establecer-datos-en-el-perfil-universal",level:3},{value:"C\xf3digo final",id:"c\xf3digo-final",level:2},{value:"Visualiza nuestro Perfil Universal actualizado",id:"visualiza-nuestro-perfil-universal-actualizado",level:2}],d={toc:c};function p(e){let{components:a,...i}=e;return(0,r.kt)("wrapper",(0,t.Z)({},d,i,{components:a,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"editar-un-perfil-universal"},"Editar un Perfil Universal"),(0,r.kt)("admonition",{title:"Requisitos",type:"info"},(0,r.kt)("p",{parentName:"admonition"},"Para seguir esta gu\xeda necesitar\xe1s un Perfil Universal que puedas controlar a trav\xe9s de su Gestor de Claves. ",(0,r.kt)("br",null),"\n\u2b05\ufe0f Si a\xfan no tienes un Perfil Universal, sigue nuestra gu\xeda anterior ",(0,r.kt)("a",{parentName:"p",href:"/lukso-es/en/es/guides/universal-profile/create-profile"},(0,r.kt)("strong",{parentName:"a"},"Crear un Perfil Universal")),".")),(0,r.kt)("p",null,"Esta gu\xeda nos ense\xf1ar\xe1 como ",(0,r.kt)("strong",{parentName:"p"},"personalizar nuestro Perfil Universal")," program\xe1ticamente en JavaScript e incluye:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"a\xf1adir una foto de perfil y de portada a nuestro Perfil Universal,"),(0,r.kt)("li",{parentName:"ul"},"editar la informaci\xf3n de nuestro Perfil Universal (por ejemplo, descripci\xf3n, insignias, enlaces),"),(0,r.kt)("li",{parentName:"ul"},"visualizar los datos e im\xe1genes actualizados de nuestro Perfil Universal en el sitio web ",(0,r.kt)("a",{parentName:"li",href:"https://l16.universalprofile.cloud"},"l16.universalprofile.cloud"),".")),(0,r.kt)("p",null,"Para alcanzar este objetivo, realizaremos los siguientes pasos:"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Crear un archivo JSON que contenga los detalles de nuestro perfil (metadatos ",(0,r.kt)("inlineCode",{parentName:"li"},"LSP3Profile"),")."),(0,r.kt)("li",{parentName:"ol"},"Cargar este archivo JSON en ",(0,r.kt)("a",{parentName:"li",href:"https://ipfs.io/"},"IPFS")," utilizando nuestra herramienta ",(0,r.kt)("a",{parentName:"li",href:"/lukso-es/en/es/tools/lsp-factoryjs/getting-started"},"lsp-factory.js"),"."),(0,r.kt)("li",{parentName:"ol"},"Cifrar + establecer nuestra nueva clave de metadatos ",(0,r.kt)("a",{parentName:"li",href:"https://github.com/lukso-network/LIPs/blob/main/LSPs/LSP-3-UniversalProfile-Metadata.md#lsp3profile"},"LSP3Profile")," en nuestro perfil con nuestra librer\xeda ",(0,r.kt)("a",{parentName:"li",href:"../../tools/erc725js/getting-started"},"erc725.js")," y web3.js.")),(0,r.kt)("admonition",{type:"tip"},(0,r.kt)("p",{parentName:"admonition"},"Un archivo JS completo ",(0,r.kt)("em",{parentName:"p"},'"listo para usar"')," est\xe1 disponible al final en la secci\xf3n ",(0,r.kt)("a",{parentName:"p",href:"#final-code"},(0,r.kt)("strong",{parentName:"a"},"C\xf3digo Final")),". Si deseas ejecutar el c\xf3digo como archivos JavaScript independientes dentro del terminal o del navegador, puedes abrir el repositorio ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/lukso-network/lukso-playground"},(0,r.kt)("inlineCode",{parentName:"a"},"lukso-playground"))," o utilizar la p\xe1gina relacionada ",(0,r.kt)("a",{parentName:"p",href:"https://stackblitz.com/github/lukso-network/lukso-playground"},"StackBlitz"),".")),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"Perfil universal con im\xe1genes e informaci\xf3n en universalprofile.cloud",src:n(5594).Z,width:"1502",height:"913"})),(0,r.kt)("h2",{id:"introducci\xf3n"},"Introducci\xf3n"),(0,r.kt)("p",null,"Un Perfil Universal es un contrato inteligente que utiliza un almac\xe9n gen\xe9rico de valor-clave (ERC725Y) como dise\xf1o de almacenamiento. La estructura hace posible adjuntar cualquier pieza de informaci\xf3n a nuestro Perfil Universal estableciendo cualquier ",(0,r.kt)("strong",{parentName:"p"},"valor")," particular a cualquier ",(0,r.kt)("strong",{parentName:"p"},"clave")," espec\xedfica."),(0,r.kt)("p",null,"Un conjunto de claves de datos ERC725Y se define como un ",(0,r.kt)("strong",{parentName:"p"},"esquema ERC725Y"),". El esquema es una matriz de claves, donde un objeto representa cada clave. Cada uno de los objetos describe el ",(0,r.kt)("inlineCode",{parentName:"p"},"nombre")," de la clave, el ",(0,r.kt)("inlineCode",{parentName:"p"},"tipo de clave")," (",(0,r.kt)("em",{parentName:"p"},"e.g., monot\xf3n, matriz, asignaci\xf3n"),"), y el tipo de datos que contiene (",(0,r.kt)("inlineCode",{parentName:"p"},"tipo de valor"),")."),(0,r.kt)("p",null,"Un esquema nos permite saber qu\xe9 claves de datos ERC725Y podemos establecer y ",(0,r.kt)("strong",{parentName:"p"},"qu\xe9 informaci\xf3n podemos recuperar y editar desde nuestro Perfil Universal"),"."),(0,r.kt)("p",null,"Perfil universal + esquema JSON ERC725Y (diagrama)](/img/standards/lsp2/ERC725Y-JSON-Schema-explained.jpeg)"),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"Para m\xe1s detalles, consulta: ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/lukso-network/LIPs/blob/main/LSPs/LSP-2-ERC725YJSONSchema.md#specification"},"LSP2 - ERC725Y JSON Schema"))),(0,r.kt)("p",null,"Una de las principales claves de datos ERC725Y del Perfil Universal es la clave ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/lukso-network/LIPs/blob/main/LSPs/LSP-3-UniversalProfile-Metadata.md#lsp3profile"},(0,r.kt)("inlineCode",{parentName:"a"},"LSP3Profile")),". Se trata de una clave estandarizada que hace referencia a los ",(0,r.kt)("strong",{parentName:"p"},"metadatos del Perfil Universal"),". Estos metadatos adoptan la forma de una referencia a un archivo JSON."),(0,r.kt)("p",null,"Esta gu\xeda almacenar\xe1 los metadatos de nuestro Perfil Universal en ",(0,r.kt)("a",{parentName:"p",href:"https://ipfs.io/"},"IPFS"),", un almacenamiento de archivos distribuido."),(0,r.kt)("p",null,"Podemos a\xf1adir (o editar) cualquier pieza de informaci\xf3n relacionada con nuestro UP mediante los siguientes pasos:"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Crea un nuevo archivo JSON con informaci\xf3n nueva o actualizada."),(0,r.kt)("li",{parentName:"ol"},"Carga el archivo en IPFS."),(0,r.kt)("li",{parentName:"ol"},"Cambia la referencia de nuestra clave ",(0,r.kt)("a",{parentName:"li",href:"https://github.com/lukso-network/LIPs/blob/main/LSPs/LSP-3-UniversalProfile-Metadata.md#lsp3profile"},"LSP3Profile")," para que apunte a nuestro archivo JSON cargado.")),(0,r.kt)("p",null,"Metadatos ",(0,r.kt)("a",{target:"_blank",href:n(4001).Z},"LSP3Profile como archivo JSON en IPFS (diagrama)")),(0,r.kt)("admonition",{title:"M\xe1s informaci\xf3n",type:"info"},(0,r.kt)("p",{parentName:"admonition"},(0,r.kt)("strong",{parentName:"p"},"IPFS es s\xf3lo un lugar entre muchos")," donde puedes almacenar los metadatos de tu Perfil Universal.",(0,r.kt)("br",null),"\nPuedes utilizar otras opciones de almacenamiento de archivos para guardar tu archivo JSON (",(0,r.kt)("em",{parentName:"p"},"e.g., ",(0,r.kt)("a",{parentName:"em",href:"https://www.ethswarm.org/"},"Swarm"),", ",(0,r.kt)("a",{parentName:"em",href:"https://www.storj.io/index.html"},"Storj"),", Google Drive, o un servidor FTP privado"),").")),(0,r.kt)("h2",{id:"configuraci\xf3n"},"Configuraci\xf3n"),(0,r.kt)("p",null,"Configura un nuevo proyecto con:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"npm init\n")),(0,r.kt)("p",null,"Puedes mantener todos los valores predeterminados."),(0,r.kt)("p",null,"A continuaci\xf3n, instala las dependencias, utilizaremos una nueva herramienta en esta gu\xeda: ",(0,r.kt)("a",{parentName:"p",href:"../../tools/erc725js/getting-started"},"erc725.js"),":"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"npm install web3 @lukso/lsp-factory.js @lukso/lsp-smart-contracts @erc725/erc725.js\n")),(0,r.kt)("h2",{id:"paso-1---crear-un-nuevo-archivo-json-lsp3profile"},"Paso 1 - Crear un nuevo archivo JSON LSP3Profile"),(0,r.kt)("admonition",{title:"Recomendaci\xf3n",type:"success"},(0,r.kt)("p",{parentName:"admonition"},'Los archivos JSON y JS completos "listos para usar" est\xe1n disponibles al final en la secci\xf3n ',(0,r.kt)("a",{parentName:"p",href:"#final-code"},(0,r.kt)("strong",{parentName:"a"},"C\xf3digo final")),".")),(0,r.kt)("p",null,"Empezaremos creando un ",(0,r.kt)("strong",{parentName:"p"},"nuevo archivo JSON")," que contendr\xe1 nuestros metadatos ",(0,r.kt)("inlineCode",{parentName:"p"},"LSP3Profile"),"."),(0,r.kt)("p",null,"Utiliza el archivo de plantilla JSON de abajo, y sigue los ",(0,r.kt)("strong",{parentName:"p"},"pasos 1.1 y 1.2")," para rellenar los campos en blanco marcados con puntos."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json",metastring:'title="UniversalProfileMetadata.json"',title:'"UniversalProfileMetadata.json"'},'{\n  "LSP3Profile": {\n    "name": "...", // un nombre de usuario elegido por ti mismo\n    "description": "...", // Una descripci\xf3n de la persona, empresa, organizaci\xf3n o creador del perfil.\n    "links": [\n      // enlaces asociados al perfil\n      {\n        "title": "...", // un t\xedtulo para el enlace.\n        "url": "..." // el enlace en s\xed\n      }\n      // agrega m\xe1s enlaces...\n    ],\n    "tags": ["...", "..."], // etiquetas asociadas al perfil\n    "profileImage": [\n      {\n        "width": 640, // en pixeles\n        "height": 609, // en pixeles\n        "hashFunction": "keccak256(bytes)", // \xa1no lo cambies!\n        "hash": "0x...", // agrega aqu\xed el hash keccak256 de la imagen\n        "url": "ipfs://..." // Identificador de imagen IPFS (CID)\n      }\n    ],\n    "backgroundImage": [\n      {\n        "width": 1024, // en pixeles\n        "height": 576, // en pixeles\n        "hashFunction": "keccak256(bytes)", // \xa1no lo cambies!\n        "hash": "0x...", // agrega aqu\xed el hash keccak256 de la imagen\n        "url": "ipfs://..." // Identificador de imagen IPFS (CID)\n      }\n    ]\n  }\n}\n')),(0,r.kt)("h3",{id:"11---a\xf1adir-detalles-del-perfil-enlaces-etiquetas-etc"},"1.1 - A\xf1adir detalles del perfil (enlaces, etiquetas, etc.)"),(0,r.kt)("p",null,"Puedes agregar m\xe1s detalles sobre el Perfil Universal para el nombre de la entidad, la descripci\xf3n, los enlaces y las etiquetas."),(0,r.kt)("p",null,"\xa1Se tan creativo como quieras para hacer tu Perfil Universal tan \xfanico como sea posible! \ud83c\udfa8"),(0,r.kt)("admonition",{title:"M\xe1s informaci\xf3n",type:"info"},(0,r.kt)("p",{parentName:"admonition"},"Las propiedades ",(0,r.kt)("inlineCode",{parentName:"p"},"links")," y ",(0,r.kt)("inlineCode",{parentName:"p"},"tags")," aceptan un conjunto de objetos o cadenas, \xa1as\xed que puedes a\xf1adir tantos como necesites!"),(0,r.kt)("p",{parentName:"admonition"},"Para editar las propiedades ",(0,r.kt)("inlineCode",{parentName:"p"},"profileImage")," y ",(0,r.kt)("inlineCode",{parentName:"p"},"backgroundImage"),", consulta ",(0,r.kt)("strong",{parentName:"p"},"Paso 1.2")," m\xe1s abajo \u2b07\ufe0f")),(0,r.kt)("h3",{id:"12---a\xf1adir-una-imagen-de-perfil-y-de-fondo"},"1.2 - A\xf1adir una imagen de perfil y de fondo"),(0,r.kt)("admonition",{type:"caution"},(0,r.kt)("p",{parentName:"admonition"},"Los tama\xf1os de imagen deben escribirse como n\xfameros, no como cadenas."),(0,r.kt)("p",{parentName:"admonition"},"El ",(0,r.kt)("strong",{parentName:"p"},"ancho m\xe1ximo de imagen")," permitido en ",(0,r.kt)("a",{parentName:"p",href:"https://universalprofile.cloud"},"universalprofile.cloud")," es: ",(0,r.kt)("inlineCode",{parentName:"p"},"profileImage <= 800px"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"backgroundImage <= 1800px"))),(0,r.kt)("admonition",{type:"info"},(0,r.kt)("p",{parentName:"admonition"},"El archivo JSON para LSP3Profile acepta una matriz de im\xe1genes para que tenga im\xe1genes de diferentes tama\xf1os y dimensiones.",(0,r.kt)("br",null),"\nDe esta manera, las interfaces de cliente pueden saber qu\xe9 archivos elegir en funci\xf3n del tama\xf1o del contenedor en su interfaz.")),(0,r.kt)("p",null,"Para las propiedades ",(0,r.kt)("inlineCode",{parentName:"p"},"profileImage")," y ",(0,r.kt)("inlineCode",{parentName:"p"},"backgroundImage"),", necesitaremos a\xf1adir la siguiente informaci\xf3n:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"hash"),": usa este ",(0,r.kt)("strong",{parentName:"li"},(0,r.kt)("a",{parentName:"strong",href:"https://emn178.github.io/online-tools/keccak_256_checksum.html"},"generador de hash de imagen keccak256")),"."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"url"),": sube tus im\xe1genes a la Pasarela IPFS de LUKSO.")),(0,r.kt)("p",null,"Utiliza esta ",(0,r.kt)("a",{parentName:"p",href:"https://anarkrypto.github.io/upload-files-to-ipfs-from-browser-panel/public/#"},"herramienta de carga de archivos IPFS")," con la configuraci\xf3n que se muestra a continuaci\xf3n en verde."),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Direcci\xf3n del nodo: ",(0,r.kt)("inlineCode",{parentName:"li"},"api.2eff.lukso.dev")),(0,r.kt)("li",{parentName:"ul"},"Puerto API / Puerto Gateway: ",(0,r.kt)("inlineCode",{parentName:"li"},"443"),".")),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"Configuraci\xf3n ipfs LUKSO",src:n(3511).Z,width:"400",height:"269"})),(0,r.kt)("p",null,"Arrastra y suelta tus im\xe1genes (puedes subir varias im\xe1genes a la vez) y ",(0,r.kt)("em",{parentName:"p"},"s\xfabelas"),". Una vez completado el proceso"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Copia el identificador de archivo IPFS (",(0,r.kt)("inlineCode",{parentName:"li"},"CID"),") que se muestra en el campo ",(0,r.kt)("inlineCode",{parentName:"li"},"hash")," marcado en verde m\xe1s abajo."),(0,r.kt)("li",{parentName:"ol"},"Pega el ",(0,r.kt)("inlineCode",{parentName:"li"},"CID")," en el campo ",(0,r.kt)("inlineCode",{parentName:"li"},"url")," de nuestro archivo JSON, empezando por ",(0,r.kt)("inlineCode",{parentName:"li"},"ipfs://")," al principio.")),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"ipfs file upload",src:n(5569).Z,width:"1002",height:"645"})),(0,r.kt)("p",null,"Aseg\xfarate de guardar tu archivo JSON despu\xe9s de haber a\xf1adido todos tus datos e im\xe1genes."),(0,r.kt)("admonition",{type:"note"},(0,r.kt)("p",{parentName:"admonition"},"No olvides borrar los comentarios del archivo JSON.")),(0,r.kt)("p",null,"Ya estamos listos para aplicar estos cambios a nuestro Perfil Universal. Veremos c\xf3mo en la siguiente secci\xf3n \u2b07\ufe0f"),(0,r.kt)("h2",{id:"paso-2---subir-el-archivo-json-a-ipfs"},"Paso 2 - Subir el archivo JSON a IPFS"),(0,r.kt)("admonition",{title:"Aviso",type:"note"},(0,r.kt)("p",{parentName:"admonition"},"El resto de este tutorial debe hacerse en un ",(0,r.kt)("strong",{parentName:"p"},"nuevo archivo")," (",(0,r.kt)("inlineCode",{parentName:"p"},"main.js"),").")),(0,r.kt)("p",null,"Ahora empezaremos a escribir el c\xf3digo principal del tutorial.\nCrea un nuevo archivo, ",(0,r.kt)("inlineCode",{parentName:"p"},"main.js"),"."),(0,r.kt)("p",null,"Nuestra herramienta ",(0,r.kt)("a",{parentName:"p",href:"/lukso-es/en/es/tools/lsp-factoryjs/getting-started"},"lsp-factory.js")," proporciona comodidad para subir nuestros Metadatos de perfil a IPFS."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript",metastring:'title="main.js"',title:'"main.js"'},"import { LSPFactory } from '@lukso/lsp-factory.js';\n// referencia al archivo JSON creado previamente (metadatos LSP3Profile)\nimport jsonFile from './UniversalProfileMetadata.json';\n\nconst provider = 'https://rpc.l16.lukso.network'; // URL del proveedor de RPC\n\nconst lspFactory = new LSPFactory(provider, {\n  deployKey: PRIVATE_KEY,\n  chainId: 2828, // Id de cadena de la red en la que desea desplegar\n});\n\nasync function editProfileInfo() {\n  // Paso 2 - Subir nuestro archivo JSON a IPFS\n  const uploadResult = await lspFactory.UniversalProfile.uploadProfileData(\n    jsonFile.LSP3Profile,\n  );\n  const lsp3ProfileIPFSUrl = uploadResult.url;\n  // ipfs://Qm...\n}\n")),(0,r.kt)("h2",{id:"paso-3---configurar-erc725js-y-cifrar-los-datos-de-lsp3profile"},"Paso 3 - Configurar erc725.js y cifrar los datos de LSP3Profile"),(0,r.kt)("p",null,"El siguiente paso es ",(0,r.kt)("strong",{parentName:"p"},"preparar los datos")," utilizados para editar nuestro Perfil Universal. ",(0,r.kt)("em",{parentName:"p"},"Preparar los datos")," significa ",(0,r.kt)("strong",{parentName:"p"},"cifrarlos")," para escribirlos en nuestro contrato inteligente ERC725Y de Perfil Universal."),(0,r.kt)("p",null,"Para ello, utilizaremos nuestra librer\xeda ",(0,r.kt)("a",{parentName:"p",href:"../../tools/erc725js/getting-started"},"erc725.js"),", que nos ayuda a cifrar los datos f\xe1cilmente."),(0,r.kt)("p",null,"Para configurar la librer\xeda erc725.js, necesitaremos lo siguiente:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"La direcci\xf3n de nuestro contrato de Perfil Universal: es la direcci\xf3n de nuestro perfil mencionada en la URL del ",(0,r.kt)("a",{parentName:"li",href:"https://l16.universalprofile.cloud/"},"explorador de perfiles"),"."),(0,r.kt)("li",{parentName:"ul"},"Un esquema JSON ERC725Y: un conjunto de pares clave-valor ERC725Y (",(0,r.kt)("a",{parentName:"li",href:"https://github.com/lukso-network/LIPs/blob/main/LSPs/LSP-2-ERC725YJSONSchema.md"},"LSP2 - ERC725Y JSON Schema"),")"),(0,r.kt)("li",{parentName:"ul"},"Un proveedor RPC: ",(0,r.kt)("inlineCode",{parentName:"li"},"https://rpc.l16.lukso.network"))),(0,r.kt)("p",null,"Una vez inicializado nuestro erc725.js, podemos cifrar los datos del ",(0,r.kt)("inlineCode",{parentName:"p"},"LSP3Profile")," para generar una clave y un valor."),(0,r.kt)("p",null,"Para ello, utilizamos la funci\xf3n ",(0,r.kt)("a",{parentName:"p",href:"/lukso-es/en/es/tools/erc725js/classes/ERC725#encodeData"},(0,r.kt)("inlineCode",{parentName:"a"},"encodeData()")),". La llamamos con un objeto que contiene el ",(0,r.kt)("inlineCode",{parentName:"p"},"keyName")," y el ",(0,r.kt)("inlineCode",{parentName:"p"},"value"),":"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"keyName"),": ",(0,r.kt)("inlineCode",{parentName:"li"},"LSP3Profile"),", el nombre de la clave que queremos cifrar."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"value"),": un objeto con:",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"hashFunction"),": usamos ",(0,r.kt)("inlineCode",{parentName:"li"},"keccak256")," (funci\xf3n hash est\xe1ndar). Como estamos haciendo hashing en un fichero JSON que contiene cadenas, tambi\xe9n especificamos el tipo de datos como ",(0,r.kt)("inlineCode",{parentName:"li"},"utf8"),"."),(0,r.kt)("li",{parentName:"ul"},"hash:",(0,r.kt)("inlineCode",{parentName:"li"},"obtenido tras aplicar la funci\xf3n hash"),"keccak256` al fichero JSON."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"url")," del archivo: es la URL IPFS del archivo, obtenida en el ",(0,r.kt)("strong",{parentName:"li"},"paso 2."),".")))),(0,r.kt)("p",null,"En el ",(0,r.kt)("strong",{parentName:"p"},"mismo archivo"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"main.js"),", configura la librer\xeda erc725.js."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript",metastring:'title="main.js"',title:'"main.js"'},"import Web3 from 'web3';\n// importar ERC725\nimport { ERC725 } from '@erc725/erc725.js';\n// ...\n\nconst web3 = new Web3('https://rpc.l16.lukso.network');\n\n// Paso 1 - Crear un nuevo archivo JSON LSP3Profile\n// ...\n\nasync function editProfileInfo() {\n  // Paso 2 - Subir nuestro archivo JSON a IPFS\n  // ...\n\n  // Paso 3.1 - Configurar erc725.js\n  const schema = [\n    {\n      name: 'LSP3Profile',\n      key: '0x5ef83ad9559033e6e941db7d7c495acdce616347d28e90c7ce47cbfcfcad3bc5',\n      keyType: 'Singleton',\n      valueContent: 'JSONURL',\n      valueType: 'bytes',\n    },\n  ];\n\n  const erc725 = new ERC725(schema, profileAddress, web3.currentProvider, {\n    ipfsGateway: 'https://2eff.lukso.dev/ipfs/',\n  });\n\n  // Paso 3.2 - Cifrar los datos del LSP3Profile\n  const encodedData = erc725.encodeData({\n    keyName: 'LSP3Profile',\n    value: {\n      hashFunction: 'keccak256(utf8)',\n      // hash our LSP3 metadata JSON file\n      hash: web3.utils.keccak256(JSON.stringify(uploadResult.json)),\n      url: lsp3ProfileIPFSUrl,\n    },\n  });\n  /**\n  { ejemplo de claves y valores basados en la l14\n    keys: ['0x5ef83ad9559033e6e941db7d7c495acdce616347d28e90c7ce47cbfcfcad3bc5'],\n    values: ['0x6f357c6aabbbf0d07b125d2c53c1ca19672e31ad768d8fd2ca55fbf0a6e94a39488a52c5697066733a2f2f516d59435154653572355a6556546274705a4d5a58535150324e785864674a46565a623631446b33674650355658']\n  }\n  */\n}\n")),(0,r.kt)("h2",{id:"paso-4---editar-el-perfil-universal"},"Paso 4 - Editar el Perfil Universal"),(0,r.kt)("p",null,"Ahora que nuestros datos actualizados est\xe1n cifrados, estamos listos para establecerlos en nuestro contrato inteligente de Perfil Universal. Para ello, interactuaremos con nuestro contrato inteligente Perfil Universal a trav\xe9s de Web3.js."),(0,r.kt)("h3",{id:"41---cargar-una-eoa"},"4.1 - Cargar una EOA"),(0,r.kt)("p",null,"Necesitaremos interactuar con los contratos inteligentes desde una cuenta de propiedad externa (EOA)."),(0,r.kt)("p",null,"El primer paso es cargar nuestra EOA utilizando nuestra clave privada de ",(0,r.kt)("a",{parentName:"p",href:"./create-profile#step-1---create-an-eoa"},"pasos anteriores"),"."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript",metastring:'title="Cargar cuenta a partir de una clave privada"',title:'"Cargar',cuenta:!0,a:!0,partir:!0,de:!0,una:!0,clave:!0,'privada"':!0},"import Web3 from 'web3';\nconst web3 = new Web3('https://rpc.l16.lukso.network');\n\nconst PRIVATE_KEY = '0x...'; // tu clave privada EOA (creada previamente)\n\nconst myEOA = web3.eth.accounts.wallet.add(PRIVATE_KEY);\n")),(0,r.kt)("h3",{id:"42---crear-instancias-de-contratos"},"4.2 - Crear instancias de Contratos"),(0,r.kt)("p",null,"El primer paso es crear nuevas instancias del Perfil Universal y de los contratos inteligentes ",(0,r.kt)("a",{parentName:"p",href:"../../standards/smart-contracts/lsp6-key-manager"},"Gestor de Claves"),". Vamos a necesitar:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"las ABIs de los contratos (de nuestro paquete npm ",(0,r.kt)("a",{parentName:"li",href:"https://www.npmjs.com/package/@lukso/lsp-smart-contracts"},(0,r.kt)("inlineCode",{parentName:"a"},"@lukso/lsp-smart-contracts")),")."),(0,r.kt)("li",{parentName:"ul"},"las direcciones del contrato.")),(0,r.kt)("p",null,"Si has desplegado tu Perfil Universal con nuestra herramienta ",(0,r.kt)("a",{parentName:"p",href:"/lukso-es/en/es/guides/universal-profile/create-profile"},"lsp-factory.js")," (como en nuestra gu\xeda anterior), el propietario de la UP apuntar\xe1 a la direcci\xf3n del Gestor de Claves."),(0,r.kt)("p",null,"Por lo tanto, puedes obtener r\xe1pidamente la direcci\xf3n de tu Gestor de Claves llamando a la funci\xf3n ",(0,r.kt)("a",{parentName:"p",href:"/lukso-es/en/es/standards/smart-contracts/lsp0-erc725-account#owner"},(0,r.kt)("inlineCode",{parentName:"a"},"owner()"))," en el contrato inteligente de tu Perfil Universal."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript",metastring:'title="Crear instancias de contratos y obtener la direcci\xf3n del Gestor de Claves"',title:'"Crear',instancias:!0,de:!0,contratos:!0,y:!0,obtener:!0,la:!0,"direcci\xf3n":!0,del:!0,Gestor:!0,'Claves"':!0},"import Web3 from 'web3';\nimport UniversalProfile from '@lukso/lsp-smart-contracts/artifacts/UniversalProfile.json';\nimport KeyManager from '@lukso/lsp-smart-contracts/artifacts/LSP6KeyManager.json';\n\nconst web3 = new Web3('https://rpc.l16.lukso.network');\n\n// crea una instancia de tu Perfil Universal\nconst universalProfileContract = new web3.eth.Contract(\n  UniversalProfile.abi,\n  profileAddress,\n);\n\n// si se despliega con lsp-factory.js,\n// el Gestor de Claves es el propietario del UP,\n// as\xed que recupera la direcci\xf3n de tu Gestor de Claves mediante `owner()` (= funci\xf3n getter)\nconst keyManagerAddress = await universalProfileContract.methods.owner().call();\nconst keyManagerContract = new web3.eth.Contract(\n  KeyManager.abi,\n  keyManagerAddress,\n);\n")),(0,r.kt)("h3",{id:"43---establecer-datos-en-el-perfil-universal"},"4.3 - Establecer datos en el Perfil Universal"),(0,r.kt)("p",null,"El paso final es editar nuestra clave ",(0,r.kt)("inlineCode",{parentName:"p"},"LSP3Profile")," en nuestro Perfil Universal con el nuevo valor obtenido en el ",(0,r.kt)("strong",{parentName:"p"},"Paso 3"),". Podemos acceder f\xe1cilmente al par clave-valor desde los datos cifrados obtenidos con erc725.js."),(0,r.kt)("p",null,"Dado que un Gestor de Claves es el propietario de nuestro Perfil Universal, la llamada comprobar\xe1 primero los permisos a trav\xe9s del Gestor de Claves. A continuaci\xf3n, tenemos que ",(0,r.kt)("strong",{parentName:"p"},"cifrar")," la carga \xfatil ",(0,r.kt)("inlineCode",{parentName:"p"},"setData")," y pasarla a al contrato inteligente de nuestro Perfil Universal para realizar este \xfaltimo paso."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript",metastring:'title="Preparaci\xf3n y ejecuci\xf3n de la transacci\xf3n setData"',title:'"Preparaci\xf3n',y:!0,"ejecuci\xf3n":!0,de:!0,la:!0,"transacci\xf3n":!0,'setData"':!0},"// cifrar la carga \xfatil de setData\n// (`encodedData` es el valor obtenido en el paso 3.2)\nconst abiPayload = await universalProfileContract.methods[\n  'setData(bytes32[],bytes[])'\n](encodedData.keys, encodedData.values).encodeABI();\n\n// ejecutar a trav\xe9s del Gestor de Claves, pasando la carga \xfatil del UP\nawait keyManagerContract.methods\n  .execute(abiPayload)\n  .send({ from: myEOA.address, gasLimit: 300_000 });\n")),(0,r.kt)("h2",{id:"c\xf3digo-final"},"C\xf3digo final"),(0,r.kt)("p",null,"A continuaci\xf3n se muestra el fragmento de c\xf3digo completo de esta gu\xeda, con todos los pasos compilados juntos."),(0,r.kt)("details",null,(0,r.kt)("summary",null,(0,r.kt)("code",null,"UniversalProfileMetadata.json")," (ejemplo) - haz clic para ampliar"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "LSP3Profile": {\n    "name": "Perfil LUKSO - Primeros Pasos",\n    "description": "\xa1Felicidades! Has editado con \xe9xito tu perfil y has completado el paso 2 de la Gu\xeda de Introducci\xf3n. \ud83d\ude03",\n    "links": [\n      {\n        "title": "sitio web",\n        "url": "https://misitioweb.me"\n      }\n    ],\n    "tags": ["Perfil P\xfablico"],\n    "profileImage": [\n      {\n        "width": 640,\n        "height": 609,\n        "hashFunction": "keccak256(bytes)",\n        "hash": "0xe459e5769af85b09fb43bb8eaac561e196d58c0f5da3c5e150b6695898089402",\n        "url": "ipfs://QmPCz896rcZmq8F3FuUkJinRUmPgnZGjPvZL71nAaL7Fsx"\n      }\n    ],\n    "backgroundImage": [\n      {\n        "width": 1024,\n        "height": 576,\n        "hashFunction": "keccak256(bytes)",\n        "hash": "0x1c19780d377a7b01f7dcf16e0ebffd225e29d2235625009f67cf9d86a32a79e1",\n        "url": "ipfs://QmPMmEpKnmgACsWjhDUheF8TEKpspzQhAkjbY4EBbR4jgP"\n      }\n    ]\n  }\n}\n'))),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript",metastring:'title="main.js"',title:'"main.js"'},"import Web3 from 'web3';\nimport { ERC725 } from '@erc725/erc725.js';\nimport { LSPFactory } from '@lukso/lsp-factory.js';\n\nimport UniversalProfile from '@lukso/lsp-smart-contracts/artifacts/UniversalProfile.json';\nimport KeyManager from '@lukso/lsp-smart-contracts/artifacts/LSP6KeyManager.json';\n\nimport jsonFile from './UniversalProfileMetadata.json';\n\nconst web3 = new Web3('https://rpc.l16.lukso.network');\n\n// constantes\nconst PRIVATE_KEY = '0x...';\nconst profileAddress = '0x...';\n\n// Paso 1 - Crear un nuevo archivo JSON LSP3Profile\n\nconst provider = 'https://rpc.l16.lukso.network'; // URL del proveedor RPC\n\nconst lspFactory = new LSPFactory(provider, {\n  deployKey: PRIVATE_KEY,\n  chainId: 2828, // Id de cadena de la red en la que desea desplegar\n});\n\nasync function editProfileInfo() {\n  // Paso 2 - Subir nuestro archivo JSON a IPFS\n  const uploadResult = await lspFactory.UniversalProfile.uploadProfileData(\n    jsonFile.LSP3Profile,\n  );\n  const lsp3ProfileIPFSUrl = uploadResult.url;\n  // 'ipfs://QmYCQTe5r5ZeVTbtpZMZXSQP2NxXdgJFVZb61Dk3gFP5VX'\n\n  // Paso 3.1 - Configurar erc725.js\n  const schema = [\n    {\n      name: 'LSP3Profile',\n      key: '0x5ef83ad9559033e6e941db7d7c495acdce616347d28e90c7ce47cbfcfcad3bc5',\n      keyType: 'Singleton',\n      valueContent: 'JSONURL',\n      valueType: 'bytes',\n    },\n  ];\n\n  const erc725 = new ERC725(schema, profileAddress, web3.currentProvider, {\n    ipfsGateway: 'https://2eff.lukso.dev/ipfs/',\n  });\n\n  // Paso 3.2 - Cifrar los datos del LSP3Profile (to be written on our UP)\n  const encodedData = erc725.encodeData({\n    keyName: 'LSP3Profile',\n    value: {\n      hashFunction: 'keccak256(utf8)',\n      // hash de nuestro archivo JSON de metadatos LSP3\n      hash: web3.utils.keccak256(JSON.stringify(uploadResult.json)),\n      url: lsp3ProfileIPFSUrl,\n    },\n  });\n\n  // Paso 4.1 - Cargar nuestra EOA\n  const myEOA = web3.eth.accounts.wallet.add(PRIVATE_KEY);\n  console.log('EOA:', myEOA.address);\n\n  // Paso 4.2 - Crear instancias de nuestros Contratos\n  const universalProfileContract = new web3.eth.Contract(\n    UniversalProfile.abi,\n    profileAddress,\n  );\n\n  const keyManagerAddress = await universalProfileContract.methods\n    .owner()\n    .call();\n  const keyManagerContract = new web3.eth.Contract(\n    KeyManager.abi,\n    keyManagerAddress,\n  );\n\n  // Paso 4.3 - Establecer datos (metadatos LSP3Profile actualizados) en nuestro Perfil Universal\n\n  // cifrar la carga \xfatil setData\n  const abiPayload = await universalProfileContract.methods[\n    'setData(bytes32[],bytes[])'\n  ](encodedData.keys, encodedData.values).encodeABI();\n\n  // ejecutar a trav\xe9s del Gestor de Claves, pasando la carga \xfatil del UP\n  await keyManagerContract.methods\n    .execute(abiPayload)\n    .send({ from: myEOA.address, gasLimit: 300_000 });\n}\neditProfileInfo();\n")),(0,r.kt)("h2",{id:"visualiza-nuestro-perfil-universal-actualizado"},"Visualiza nuestro Perfil Universal actualizado"),(0,r.kt)("p",null,"Ahora puede verificar el Perfil Universal en el sitio web ",(0,r.kt)("a",{parentName:"p",href:"https://l16.universalprofile.cloud/"},"explorador de perfiles")," pegando la direcci\xf3n devuelta despu\xe9s de la barra de la URL base:"),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"https://l16.universalprofile.cloud/[DIRECCI\xd3N UP]")),(0,r.kt)("p",null,"Perfil universal con fotos e informaci\xf3n en l16.universalprofile.cloud](./img/edit-profile.png)"))}p.isMDXComponent=!0},4001:(e,a,n)=>{n.d(a,{Z:()=>t});const t=n.p+"assets/files/profile-metadata-ipfs-explained-926cfc5a823a5e38b57ac27ef045908f.jpeg"},5594:(e,a,n)=>{n.d(a,{Z:()=>t});const t=n.p+"assets/images/edit-profile-303f615e8946d2c8c06fbaaec8f3bc64.png"},5569:(e,a,n)=>{n.d(a,{Z:()=>t});const t=n.p+"assets/images/ipfs-file-upload-2eba0f3434f33a0bd748ce1a53f6030f.jpg"},3511:(e,a,n)=>{n.d(a,{Z:()=>t});const t=n.p+"assets/images/ipfs-lukso-settings-4c575a164955d9fc99ff89dddb2a15b0.jpg"}}]);