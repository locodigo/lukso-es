"use strict";(self.webpackChunklukso_docs=self.webpackChunklukso_docs||[]).push([[5858],{3905:(e,t,a)=>{a.d(t,{Zo:()=>p,kt:()=>m});var n=a(7294);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function s(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function o(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?s(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):s(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function i(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},s=Object.keys(e);for(n=0;n<s.length;n++)a=s[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)a=s[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var l=n.createContext({}),c=function(e){var t=n.useContext(l),a=t;return e&&(a="function"==typeof e?e(t):o(o({},t),e)),a},p=function(e){var t=c(e.components);return n.createElement(l.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},u=n.forwardRef((function(e,t){var a=e.components,r=e.mdxType,s=e.originalType,l=e.parentName,p=i(e,["components","mdxType","originalType","parentName"]),u=c(a),m=r,k=u["".concat(l,".").concat(m)]||u[m]||d[m]||s;return a?n.createElement(k,o(o({ref:t},p),{},{components:a})):n.createElement(k,o({ref:t},p))}));function m(e,t){var a=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var s=a.length,o=new Array(s);o[0]=u;var i={};for(var l in t)hasOwnProperty.call(t,l)&&(i[l]=t[l]);i.originalType=e,i.mdxType="string"==typeof e?e:r,o[1]=i;for(var c=2;c<s;c++)o[c]=a[c];return n.createElement.apply(null,o)}return n.createElement.apply(null,a)}u.displayName="MDXCreateElement"},4010:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>l,contentTitle:()=>o,default:()=>d,frontMatter:()=>s,metadata:()=>i,toc:()=>c});var n=a(7462),r=(a(7294),a(3905));const s={sidebar_label:"LSP1 - Receptor Universal",sidebar_position:1},o="LSP1 - Receptor Universal",i={unversionedId:"es/standards/generic-standards/lsp1-universal-receiver",id:"es/standards/generic-standards/lsp1-universal-receiver",title:"LSP1 - Receptor Universal",description:"LSP1 - Receptor Universal",source:"@site/docs/es/standards/generic-standards/lsp1-universal-receiver.md",sourceDirName:"es/standards/generic-standards",slug:"/es/standards/generic-standards/lsp1-universal-receiver",permalink:"/lukso-es/es/standards/generic-standards/lsp1-universal-receiver",draft:!1,editUrl:"https://github.com/lukso-network/docs/tree/main/docs/es/standards/generic-standards/lsp1-universal-receiver.md",tags:[],version:"current",lastUpdatedAt:1681103476,formattedLastUpdatedAt:"10 abr 2023",sidebarPosition:1,frontMatter:{sidebar_label:"LSP1 - Receptor Universal",sidebar_position:1},sidebar:"standardsSidebar",previous:{title:"ERC725",permalink:"/lukso-es/es/standards/lsp-background/erc725"},next:{title:"LSP1 - Receptor Delegado Universal",permalink:"/lukso-es/es/standards/generic-standards/lsp1-universal-receiver-delegate"}},l={},c=[{value:"Introducci\xf3n",id:"introducci\xf3n",level:2},{value:"\xbfQu\xe9 representa esta norma?",id:"qu\xe9-representa-esta-norma",level:2},{value:"Especificaci\xf3n",id:"especificaci\xf3n",level:3},{value:"Extensi\xf3n",id:"extensi\xf3n",level:2},{value:"Referencias",id:"referencias",level:2}],p={toc:c};function d(e){let{components:t,...s}=e;return(0,r.kt)("wrapper",(0,n.Z)({},p,s,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"lsp1---receptor-universal"},"LSP1 - Receptor Universal"),(0,r.kt)("admonition",{title:"Documento Est\xe1ndard",type:"info"},(0,r.kt)("p",{parentName:"admonition"},(0,r.kt)("a",{parentName:"p",href:"https://github.com/lukso-network/LIPs/blob/main/LSPs/LSP-1-UniversalReceiver.md"},"LSP1 - Receptor Universal"))),(0,r.kt)("h2",{id:"introducci\xf3n"},"Introducci\xf3n"),(0,r.kt)("p",null,"A menudo existe la necesidad de que los contratos inteligentes ",(0,r.kt)("strong",{parentName:"p"},"est\xe9n al tanto de las transacciones entrantes"),", especialmente la recepci\xf3n de tokens."),(0,r.kt)("p",null,"Un buen ejemplo son las transferencias de tokens ",(0,r.kt)("strong",{parentName:"p"},(0,r.kt)("a",{parentName:"strong",href:"https://eips.ethereum.org/EIPS/eip-20"},"ERC20")),". Cuando un contrato inteligente recibe un token, no tiene una forma gen\xe9rica de ",(0,r.kt)("strong",{parentName:"p"},"ser notificado")," sobre ello. Durante la transferencia de tokens, el saldo del emisor disminuye, y el saldo del receptor aumenta. No hay ",(0,r.kt)("strong",{parentName:"p"},"m\xe1s interacciones"),", y el contrato de tokens ERC20 s\xf3lo act\xfaa como un registro."),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"Smart contract recipient outside interaction",src:a(4594).Z,width:"2668",height:"1499"})),(0,r.kt)("p",null,"Una soluci\xf3n a este problema podr\xeda ser escuchar todos los eventos de transferencia de tokens ERC20 en la red. Sin embargo, esto requiere el uso de un tercero de confianza para escuchar los eventos. Este m\xe9todo limita la autonom\xeda de los contratos inteligentes e introduce un \xfanico punto de fallo."),(0,r.kt)("p",null,"Est\xe1ndares como ",(0,r.kt)("strong",{parentName:"p"},(0,r.kt)("a",{parentName:"strong",href:"https://eips.ethereum.org/EIPS/eip-223"},"ERC223")),", ",(0,r.kt)("strong",{parentName:"p"},(0,r.kt)("a",{parentName:"strong",href:"https://eips.ethereum.org/EIPS/eip-712"},"ERC721")),", y ",(0,r.kt)("strong",{parentName:"p"},(0,r.kt)("a",{parentName:"strong",href:"https://eips.ethereum.org/EIPS/eip-1155"},"ERC1155"))," requieren tener funciones espec\xedficas para recibir y ser notificado sobre el token como ",(0,r.kt)("inlineCode",{parentName:"p"},"tokenReceived(..)"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"onERC721Received(..)"),", y ",(0,r.kt)("inlineCode",{parentName:"p"},"onERC1155Received(..)")," respectivamente."),(0,r.kt)("p",null,"Estas funciones tienen diferentes contextos, par\xe1metros y eventos que hacen que el contrato inteligente no sea interoperable. Si m\xe1s adelante en el futuro, se adopta un est\xe1ndar de token ",(0,r.kt)("strong",{parentName:"p"},"ERCXXXX"),", el contrato inteligente (cuenta, DEXs) no ser\xe1 capaz de recibir este tipo de tokens porque ya fue desplegado en la red y ",(0,r.kt)("strong",{parentName:"p"},"no soporta")," la funci\xf3n ",(0,r.kt)("inlineCode",{parentName:"p"},"onERCXXXXReceived(..)"),"."),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"On token received functions",src:a(3772).Z,width:"3284",height:"1217"})),(0,r.kt)("p",null,"Una forma de resolver este problema es crear una ",(0,r.kt)("strong",{parentName:"p"},"funci\xf3n est\xe1ndar y unificada")," que cualquier contrato inteligente pueda implementar. DEXs, Wallets, o perfiles podr\xedan utilizar esta funci\xf3n para ser notificados sobre un activo entrante, informaci\xf3n, seguidores, etc."),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"Unified notification function to call",src:a(2761).Z,width:"2456",height:"1628"})),(0,r.kt)("h2",{id:"qu\xe9-representa-esta-norma"},"\xbfQu\xe9 representa esta norma?"),(0,r.kt)("h3",{id:"especificaci\xf3n"},"Especificaci\xf3n"),(0,r.kt)("admonition",{title:"sugerencia",type:"success"},(0,r.kt)("p",{parentName:"admonition"},"Los contratos inteligentes que implementen el est\xe1ndar ",(0,r.kt)("a",{parentName:"p",href:"#"},"LSP1-ReceporUniversal")," DEBER\xcdAN ",(0,r.kt)("strong",{parentName:"p"},"registrar")," el ",(0,r.kt)("strong",{parentName:"p"},(0,r.kt)("a",{parentName:"strong",href:"/lukso-es/es/standards/smart-contracts/interface-ids"},"ID-de-interfaz de LSP1ReceporUniversa")," utilizando ERC165"),". De esta forma, otros contratos pueden saber que el contrato soporta el est\xe1ndar LSP1.")),(0,r.kt)("p",null,"Este est\xe1ndar define una \xfanica funci\xf3n llamada ",(0,r.kt)("inlineCode",{parentName:"p"},"universalReceiver(...)")," que puede recibir ",(0,r.kt)("strong",{parentName:"p"},"cualquier informaci\xf3n arbitraria"),". Toma dos par\xe1metros:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"bytes32 ",(0,r.kt)("inlineCode",{parentName:"li"},"typeId"),": Hash o Hook de un est\xe1ndar espec\xedfico."),(0,r.kt)("li",{parentName:"ul"},"bytes ",(0,r.kt)("inlineCode",{parentName:"li"},"data"),": Cualquier dato arbitrario.")),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"Los contratos receptores deben tener en cuenta el par\xe1metro ",(0,r.kt)("inlineCode",{parentName:"p"},"typeId")," para ",(0,r.kt)("strong",{parentName:"p"},"descifrar los datos correctamente"),".")),(0,r.kt)("p",null,"La funci\xf3n ",(0,r.kt)("inlineCode",{parentName:"p"},"universalReceiver(...)")," ",(0,r.kt)("strong",{parentName:"p"},"emite un evento con los datos que se le pasan y algunos datos adicionales"),"."),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"universalReceiver function emits an event",src:a(291).Z,width:"2564",height:"1559"})),(0,r.kt)("p",null,"Por ejemplo, ",(0,r.kt)("strong",{parentName:"p"},"para notificar al receptor que est\xe1 a punto de recibir tokens"),", durante una transferencia de tokens, el contrato de tokens puede llamar a la funci\xf3n ",(0,r.kt)("inlineCode",{parentName:"p"},"universalReceiver(..)")," del receptor con:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"bytes32 ",(0,r.kt)("inlineCode",{parentName:"li"},"typeId"),": ",(0,r.kt)("strong",{parentName:"li"},"Hash"),"('ERCXXXXTokenReceived')"),(0,r.kt)("li",{parentName:"ul"},"bytes ",(0,r.kt)("inlineCode",{parentName:"li"},"data"),": ",(0,r.kt)("strong",{parentName:"li"},"packedData"),"(cantidad de token enviado, la direcci\xf3n del remitente, la marca de tiempo del bloque)")),(0,r.kt)("p",null,"De esta forma, en lugar de ",(0,r.kt)("strong",{parentName:"p"},"escuchar todos los eventos de los contratos de tokens en la red"),", y comprobar cu\xe1l de estas transferencias es relativa al receptor, los usuarios pueden escuchar el evento ",(0,r.kt)("strong",{parentName:"p"},(0,r.kt)("a",{parentName:"strong",href:"/lukso-es/es/standards/smart-contracts/lsp0-erc725-account#universalreceiver-1"},"ReceptorUniversal"))," del contrato que implementa el ",(0,r.kt)("inlineCode",{parentName:"p"},"receptoruniversal(..)")," y conocer los detalles de la transferencia del token.  "),(0,r.kt)("p",null,"Adem\xe1s de emitir un evento, la funci\xf3n ",(0,r.kt)("inlineCode",{parentName:"p"},"universalReceiver(...)")," puede implementar ",(0,r.kt)("strong",{parentName:"p"},"l\xf3gica personalizada")," para hacer que el contrato se comporte de forma diferente en funci\xf3n de los datos recibidos. Algunas ideas incluyen:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Revertir en las llamadas para desautorizar completamente que el contrato inteligente reciba activos, informaci\xf3n, etc. \u274c"),(0,r.kt)("li",{parentName:"ul"},"Registrar los activos recibidos dentro del almacenamiento del contrato (ver ",(0,r.kt)("a",{parentName:"li",href:"/lukso-es/es/standards/universal-profile/lsp5-received-assets"},"LSP5 - Activos Recibidos"),"). \u2795"),(0,r.kt)("li",{parentName:"ul"},"No permitir la recepci\xf3n de tokens espec\xedficos de direcciones de contratos de tokens espec\xedficos, por ejemplo (p. ej.: tokens de spam)."),(0,r.kt)("li",{parentName:"ul"},"Reenv\xedo de todos los activos recibidos a una b\xf3veda externa o a un contrato de participaciones."),(0,r.kt)("li",{parentName:"ul"},"Reenviar tokens espec\xedficos en un contrato detr\xe1s de un protocolo o dApp (por ejemplo: liquidez o fondo de pr\xe9stamos para ganar intereses)."),(0,r.kt)("li",{parentName:"ul"},"Dependiendo del typeId, guardar un porcentaje % de tokens recibidos (tokens nativos o no), coloc\xe1ndolos en una b\xf3veda por ejemplo.")),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"universalReceiver function execute custom logic",src:a(5730).Z,width:"2560",height:"1562"})),(0,r.kt)("h2",{id:"extensi\xf3n"},"Extensi\xf3n"),(0,r.kt)("admonition",{type:"info"},(0,r.kt)("p",{parentName:"admonition"},"See the ",(0,r.kt)("strong",{parentName:"p"},(0,r.kt)("a",{parentName:"strong",href:"/lukso-es/es/standards/generic-standards/lsp1-universal-receiver-delegate"},"LSP1-ReceptorDelegadoUniversal"))," standard for more details.")),(0,r.kt)("p",null,"Sobreescribir y personalizar la funci\xf3n ",(0,r.kt)("inlineCode",{parentName:"p"},"universalReceiver(..)")," es una opci\xf3n para que los usuarios permitan ",(0,r.kt)("strong",{parentName:"p"},"comportamientos diferentes dependiendo de los datos recibidos"),". Sin embargo, no es aconsejable codificar la l\xf3gica de reacci\xf3n a acciones espec\xedficas dentro de la funci\xf3n porque ",(0,r.kt)("strong",{parentName:"p"},"esta l\xf3gica puede necesitar cambiar en el futuro")," dependiendo de varios factores (por ejemplo, la b\xf3veda donde se reenv\xedan los tokens se ve comprometida, se despliega un nuevo contrato de estaca, se decide revertir sobre tokens espec\xedficos m\xe1s tarde). "),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},(0,r.kt)("a",{parentName:"strong",href:"/lukso-es/es/standards/generic-standards/lsp1-universal-receiver-delegate"},"LSP1-ReceptorDelegadoUnviersal"))," es una ",(0,r.kt)("strong",{parentName:"p"},"extensi\xf3n opcional")," del est\xe1ndar ",(0,r.kt)("strong",{parentName:"p"},(0,r.kt)("a",{parentName:"strong",href:"#"},"LSP1-ReceptorUniversal")),". Adem\xe1s de notificar a un contrato sobre las transacciones entrantes y salientes emitiendo un evento, puede delegar la llamada a un contrato externo que puede ",(0,r.kt)("strong",{parentName:"p"},"manejar y reaccionar a llamadas espec\xedficas")," con su l\xf3gica personalizada."),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"Universal Receiver Delegate contract",src:a(7975).Z,width:"2466",height:"1621"})),(0,r.kt)("p",null,"direcci\xf3n del ",(0,r.kt)("strong",{parentName:"p"},"contrato externo")," puede almacenarse y cambiarse dentro del almac\xe9n de contratos. De esta forma, los usuarios pueden personalizar dichos contratos para implementar una l\xf3gica espec\xedfica que sea modificable en cualquier momento."),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"Multiple Universal Receiver Delegate",src:a(1516).Z,width:"2460",height:"1625"})),(0,r.kt)("p",null,"Si el contrato que implementa el ",(0,r.kt)("inlineCode",{parentName:"p"},"universalReceiver(..)")," admite ",(0,r.kt)("strong",{parentName:"p"},(0,r.kt)("a",{parentName:"strong",href:"https://github.com/ERC725Alliance/erc725/blob/main/docs/ERC-725.md#erc725y"},"ERC725Y Almac\xe9n de Datos clave-valor")),", la direcci\xf3n del ",(0,r.kt)("strong",{parentName:"p"},"contrato externo")," DEBE establecerse como valor para la ",(0,r.kt)("strong",{parentName:"p"},"clave de datos LSP1ReceptorDelegadoUniversal")," que se muestra a continuaci\xf3n para habilitar la extensi\xf3n opcional. Este par clave-valor actuar\xe1 como referencia, haciendo que este contrato externo sea actualizable en caso necesario."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "name": "LSP1UniversalReceiverDelegate",\n  "key": "0x0cfc51aec37c55a4d0b1a65c6255c4bf2fbdf6277f3cc0730c45b828b6db8b47",\n  "keyType": "Singleton",\n  "valueType": "address",\n  "valueContent": "Address"\n}\n')),(0,r.kt)("p",null,"Consulta ",(0,r.kt)("strong",{parentName:"p"},(0,r.kt)("a",{parentName:"strong",href:"/lukso-es/es/standards/generic-standards/lsp2-json-schema"},"LSP2-EsquemaJSONERC725Y"))," para obtener m\xe1s informaci\xf3n sobre el esquema JSON."),(0,r.kt)("h2",{id:"referencias"},"Referencias"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://github.com/lukso-network/LIPs/blob/main/LSPs/LSP-1-UniversalReceiver.md"},"Propuestas de Est\xe1ndares LUKSO: LSP1 - Receptor Delegado Universal (Especificaci\xf3n est\xe1ndar, GitHub)"))))}d.isMDXComponent=!0},1516:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/multiple-urd-dbacaac7a9b61d1a1cd209512248dcb7.jpeg"},3772:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/on-received-functions-371eabf6dce3b5864aeacd9a4f587d2f.jpeg"},4594:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/token-contract-registry-7b488bd548f204eb746c68fb87b6bf52.jpeg"},2761:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/unified-notification-function-4623138f98fce2e4eed11af920e00ab2.jpeg"},7975:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/universal-receiver-delegate-a2cb96f1665b4bb8cd1bb5d0071c1eb8.jpeg"},291:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/universal-receiver-event-92438c1b58104b1b40ef658e1eec5316.jpeg"},5730:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/universal-receiver-logic-3c42adedb2b44c6fc6a95003f01439fa.jpeg"}}]);