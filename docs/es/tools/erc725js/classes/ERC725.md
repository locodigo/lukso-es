---
sidebar_position: 1
---

# ERC725

## decodeData

```js
myErc725.decodeData(data [, schemas]);
```

```js
ERC725.decodeData(data, schemas);
```

Si estás leyendo el almacén de claves y valores de un contrato inteligente ERC725, puedes utilizar la función `decodeData` para que lo decodifique por ti.

:::tip
Si quieres total comodidad, se recomienda utilizar la función [`fetchData`](ERC725.md#fetchdata), que automáticamente `decodifica` y `fetchea` las referencias externas.
:::

#### Parámetros

##### 1. `data` - Objeto o conjunto de objetos

Un objeto o conjunto de objetos que contiene las siguientes propiedades:

| Nombre                       | Tipo                           | Descripción                                                                                                                                                      |
| :--------------------------- | :----------------------------- | :--------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `keyName`                    | cadena                         | Puede ser la clave con nombre (es decir, `LSP3Profile`, `LSP12IssuedAssetsMap:<address>`) o la clave hash (con o sin el prefijo `0x`, es decir, `0x5ef...` o `5ef...`). |
| `dynamicKeyParts` (opcional) | cadena or <br/> cadena[&nbsp;] | Si `keyName` es una clave dinámica, las partes dinámicas de `keyName` que se utilizarán para codificar la clave.                                                        |
| `value`                      | cadena or <br/> cadena[&nbsp;] | El valor que debe descodificarse. Puede ser una cadena, una matriz de cadenas o un JSON...                                                                               |

El `keyName` también admite claves dinámicas para [`Mapping`](https://github.com/lukso-network/LIPs/blob/main/LSPs/LSP-2-ERC725YJSONSchema.md#mapping) y [`MappingWithGrouping`](https://github.com/lukso-network/LIPs/blob/main/LSPs/LSP-2-ERC725YJSONSchema.md#mapping). Por lo tanto, puede utilizar variables en el nombre de la clave como `LSP12IssuedAssetsMap:<address>`. En ese caso, el valor también debe establecer la propiedad `dynamicKeyParts`:

- `dynamicKeyParts`: cadena o cadena[&nbsp;] que contiene las variables que necesitan ser codificadas.

##### 2. `schemas` - Conjunto de objetos (opcional)

Un conjunto de objetos extra [LSP-2 ERC725YJSONSchema] que pueden utilizarse para encontrar el esquema. Si se llama en una instancia, es opcional y se concatenará con el esquema proporcionado en la instanciación.

#### Devuelve

| Nombre        | Tipo               | Descripción                                                                          |
| :------------ | :----------------- | :----------------------------------------------------------------------------------- |
| `decodedData` | Objeto or Conjunto | Los datos descodificados tal y como se definen y esperan en los siguientes esquemas. |

:::info

- Si la entrada es un conjunto de objetos, los valores se devolverán en un conjunto.
- Si la entrada es un único objeto, la salida será directamente el objeto decodedData.

:::

#### Ejemplo de una sola clave

```javascript title=" Decodificar un objeto con una sola clave"
myErc725.decodeData([
  {
    keyName: 'LSP3Profile',
    value:
      '0x6f357c6a820464ddfac1bec070cc14a8daf04129871d458f2ca94368aae8391311af6361696670733a2f2f516d597231564a4c776572673670456f73636468564775676f3339706136727963455a4c6a7452504466573834554178',
  },
]);
/**
[
  {
    name: 'LSP3Profile',
    key: '0x5ef83ad9559033e6e941db7d7c495acdce616347d28e90c7ce47cbfcfcad3bc5',
    value: {
      hashFunction: 'keccak256(utf8)',
      hash: '0x820464ddfac1bec070cc14a8daf04129871d458f2ca94368aae8391311af6361',
      url: 'ipfs://QmYr1VJLwerg6pEoscdhVGugo39pa6rycEZLjtRPDfW84UAx',
    },
  },
]
*/

myErc725.decodeData({
  keyName: 'LSP3Profile',
  value:
    '0x6f357c6a820464ddfac1bec070cc14a8daf04129871d458f2ca94368aae8391311af6361696670733a2f2f516d597231564a4c776572673670456f73636468564775676f3339706136727963455a4c6a7452504466573834554178',
});
/**
{
  name: 'LSP3Profile',
  key: '0x5ef83ad9559033e6e941db7d7c495acdce616347d28e90c7ce47cbfcfcad3bc5',
  value: {
    hashFunction: 'keccak256(utf8)',
    hash: '0x820464ddfac1bec070cc14a8daf04129871d458f2ca94368aae8391311af6361',
    url: 'ipfs://QmYr1VJLwerg6pEoscdhVGugo39pa6rycEZLjtRPDfW84UAx',
  },
}
*/
```

#### Ejemplo Multi-Clave

```javascript title=" Decodificación de un objeto con varias claves"
myErc725.decodeData([
  {
    keyName: 'LSP3Profile',
    value:
      '0x6f357c6a820464ddfac1bec070cc14a8daf04129871d458f2ca94368aae8391311af6361696670733a2f2f516d597231564a4c776572673670456f73636468564775676f3339706136727963455a4c6a7452504466573834554178',
  },
  {
    keyName: 'LSP12IssuedAssets[]',
    value: [
      {
        key: '0x7c8c3416d6cda87cd42c71ea1843df28ac4850354f988d55ee2eaa47b6dc05cd',
        value:
          '0x0000000000000000000000000000000000000000000000000000000000000002',
      },
      {
        key: '0x7c8c3416d6cda87cd42c71ea1843df2800000000000000000000000000000000',
        value: '0xd94353d9b005b3c0a9da169b768a31c57844e490',
      },
      {
        key: '0x7c8c3416d6cda87cd42c71ea1843df2800000000000000000000000000000001',
        value: '0xdaea594e385fc724449e3118b2db7e86dfba1826',
      },
    ],
  },
]);
/**
[
  {
    name: 'LSP3Profile',
    key: '0x5ef83ad9559033e6e941db7d7c495acdce616347d28e90c7ce47cbfcfcad3bc5',
    value: {
      hash: '0x820464ddfac1bec070cc14a8daf04129871d458f2ca94368aae8391311af6361',
      hashFunction: 'keccak256(utf8)',
      url: 'ipfs://QmYr1VJLwerg6pEoscdhVGugo39pa6rycEZLjtRPDfW84UAx',
    },
  },
  {
    name: 'LSP12IssuedAssets[]',
    key: '0x7c8c3416d6cda87cd42c71ea1843df28ac4850354f988d55ee2eaa47b6dc05cd',
    value: [
      '0xD94353D9B005B3c0A9Da169b768a31C57844e490',
      '0xDaea594E385Fc724449E3118B2Db7E86dFBa1826',
    ],
  },
];
*/
```

#### Ejemplo de Clave Dinámica

```javascript title=" Decodificación de un objeto con clave dinámica y un esquema personalizado"
const schemas = [
  {
    name: 'MyKeyName:<bytes32>:<bool>',
    key: '0x...',
    keyType: 'Singleton',
    valueType: 'bytes',
    valueContent: 'JSONURL',
  },
];

myErc725.decodeData(
  [
    {
      keyName: 'MyKeyName:<bytes32>:<bool>',
      dynamicKeyParts: [
        '0xaaaabbbbccccddddeeeeffff111122223333444455556666777788889999aaaa',
        'true',
      ],
      value:
        '0x6f357c6a820464ddfac1bec070cc14a8daf04129871d458f2ca94368aae8391311af6361696670733a2f2f516d597231564a4c776572673670456f73636468564775676f3339706136727963455a4c6a7452504466573834554178',
    },
  ],
  schemas,
);
/**
[
  {
    name: 'MyKeyName:aaaabbbbccccddddeeeeffff111122223333444455556666777788889999aaaa:true',
    key: '0x35e6950bc8d2aaaabbbb00000000000000000000000000000000000000000001',
    value: {
      hashFunction: 'keccak256(utf8)',
      hash: '0x820464ddfac1bec070cc14a8daf04129871d458f2ca94368aae8391311af6361',
      url: 'ifps://QmYr1VJLwerg6pEoscdhVGugo39pa6rycEZLjtRPDfW84UAx',
    },
  },
];
*/
```

---

## decodePermissions

```js
ERC725.decodePermissions(permission);
```

Decodifica los permisos a partir del hexadecimal definido por el [Estándar del Gestor de Claves LSP6](https://docs.lukso.tech/standards/universal-profile/lsp6-key-manager).

:::info

`decodePermissions` está disponible como método estático o no estático, por lo que puede invocarse sin instanciar un objeto ERC725.

:::

#### Parámetros

##### 1. `permission` - Cadena

El permiso codificado (32bytes hex).

#### Devuelve

| Nombre               | Tipo   | Descripción                                                                                                   |
| :------------------- | :----- | :------------------------------------------------------------------------------------------------------------ |
| `decodedPermissions` | Objeto | Un objeto que especifica si los permisos LSP6 por defecto se incluyen en la cadena hexadecimal proporcionada. |

#### Ejemplo

```javascript title=" Decodificando permisos"
ERC725.decodePermissions('0x0000000000000000000000000000000000000000000000000000000000000110'),
/**
{
  CHANGEOWNER: false,
  CHANGEPERMISSIONS: false,
  ADDCONTROLLER: false,
  SETDATA: false,
  CALL: true,
  STATICCALL: false,
  DELEGATECALL: false,
  DEPLOY: false,
  TRANSFERVALUE: true,
  SIGN: false,
}
*/

ERC725.decodePermissions('0x000000000000000000000000000000000000000000000000000000000000000a'),
/**
{
  CHANGEOWNER: false,
  CHANGEPERMISSIONS: true,
  ADDCONTROLLER: false,
  SETDATA: true,
  CALL: false,
  STATICCALL: false,
  DELEGATECALL: false,
  DEPLOY: false,
  TRANSFERVALUE: false,
  SIGN: false,
}
*/

// This method is also available on the instance:
myErc725.decodePermissions('0x0000000000000000000000000000000000000000000000000000000000000110'),
```

---

## encodeData

```js
myErc725.encodeData(data [, schemas]);
```

```js
ERC725.encodeData(data, schemas);
```

Cifra los datos de un contrato inteligente según su `ERC725JSONSchema` para poder almacenar la información en contratos inteligentes.

:::tip

Al codificar JSON, es posible pasar el objeto JSON y la URL donde está disponible públicamente. El JSON se hasheará con `keccak256`.

:::

#### Parámetros

##### 1. `data` - Objeto o conjunto de objetos

Un objeto o conjunto de objetos que contiene las siguientes propiedades:

| Nombre                       | Tipo                                           | Descripción                                                                                                                                                      |
| :--------------------------- | :--------------------------------------------- | :--------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `keyName`                    | cadena                                         | Puede ser la clave con nombre (es decir, `LSP3Profile`, `LSP12IssuedAssetsMap:<address>`) o la clave hash (con o sin el prefijo `0x`, es decir, `0x5ef...` o `5ef...`). |
| `dynamicKeyParts` (optional) | cadena or <br/> cadenar[&nbsp;]                 | Las partes dinámicas del `keyName` que se utilizarán para cifrar la clave.                                                                                       |
| `value`                      | cadena or <br/> cadena[&nbsp;] <br/> JSON todo | El valor que debe codificarse. Puede ser una cadena, un conjunto de cadenas o un JSON...                                                                               |

El `keyName` también admite claves dinámicas para [`Mapping`](https://github.com/lukso-network/LIPs/blob/main/LSPs/LSP-2-ERC725YJSONSchema.md#mapping) y [`MappingWithGrouping`](https://github.com/lukso-network/LIPs/blob/main/LSPs/LSP-2-ERC725YJSONSchema.md#mapping). Por lo tanto, puede utilizar variables en el nombre de la clave como `LSP12IssuedAssetsMap: <address>`. En ese caso, el valor también debe establecer la propiedad `dynamicKeyParts`:

- `dynamicKeyParts`: cadena o cadena[&nbsp;] que contiene las variables que necesitan ser codificadas.

##### 2. `schemas` - Conjunto de objetos (opcional)

Un conjunto de objetos extra [LSP-2 ERC725YJSONSchema] que pueden utilizarse para encontrar el esquema. Si se llama en una instancia, es opcional y se concatenará con el esquema proporcionado en la instanciación.

#### Devuelve

| Nombre        | Tipo   | Descripción                                                                                                                                                                                                |
| :------------ | :----- | :--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `encodedData` | Objeto | Un objeto que contiene las claves y valores cifrados de acuerdo con el [Esquema LSP2 ERC725Y JSON](https://github.com/lukso-network/LIPs/blob/main/LSPs/LSP-2-ERC725YJSONSchema.md) de los datos que se han pasado. |

Una vez cifrados los `datos`, el objeto está listo para ser almacenado en contratos inteligentes.

#### Ejemplos

```javascript title=" Cifrar un JSONURL con JSON y URL cargado"
myErc725.encodeData([
  {
    keyName: 'LSP3Profile',
    value: {
      json: profileJson,
      url: 'ipfs://QmQTqheBLZFnQUxu5RDs8tA9JtkxfZqMBcmGd9sukXxwRm',
    },
  },
]);
/**
{
  keys: ['0x5ef83ad9559033e6e941db7d7c495acdce616347d28e90c7ce47cbfcfcad3bc5'],
  values: ['0x6f357c6a2404a2866f05e53e141eb61382a045e53c2fc54831daca9d9e1e039a11f739e1696670733a2f2f516d5154716865424c5a466e5155787535524473387441394a746b78665a714d42636d47643973756b587877526d'],
}
*/

// También puedes utilizar la clave hash (con o sin el prefijo 0x)
myErc725.encodeData([
  {
    keyName:
      '0x5ef83ad9559033e6e941db7d7c495acdce616347d28e90c7ce47cbfcfcad3bc5',
    value: {
      json: profileJson,
      url: 'ipfs://QmQTqheBLZFnQUxu5RDs8tA9JtkxfZqMBcmGd9sukXxwRm',
    },
  },
]);
/**
{
  keys: ['0x5ef83ad9559033e6e941db7d7c495acdce616347d28e90c7ce47cbfcfcad3bc5'],
  values: ['0x6f357c6a2404a2866f05e53e141eb61382a045e53c2fc54831daca9d9e1e039a11f739e1696670733a2f2f516d5154716865424c5a466e5155787535524473387441394a746b78665a714d42636d47643973756b587877526d'],
}
*/

myErc725.encodeData([
  {
    keyName: '5ef83ad9559033e6e941db7d7c495acdce616347d28e90c7ce47cbfcfcad3bc5',
    value: {
      json: profileJson,
      url: 'ipfs://QmQTqheBLZFnQUxu5RDs8tA9JtkxfZqMBcmGd9sukXxwRm',
    },
  },
]);
/**
{
  keys: ['0x5ef83ad9559033e6e941db7d7c495acdce616347d28e90c7ce47cbfcfcad3bc5'],
  values: ['0x6f357c6a2404a2866f05e53e141eb61382a045e53c2fc54831daca9d9e1e039a11f739e1696670733a2f2f516d5154716865424c5a466e5155787535524473387441394a746b78665a714d42636d47643973756b587877526d'],
}
*/
```

```javascript
myErc725.encodeData({
  keyName: 'LSP1UniversalReceiverDelegate',
  value: '0x1183790f29BE3cDfD0A102862fEA1a4a30b3AdAb',
});
/**
{
  keys: ['0x0cfc51aec37c55a4d0b1a65c6255c4bf2fbdf6277f3cc0730c45b828b6db8b47'],
  values: ['0x1183790f29be3cdfd0a102862fea1a4a30b3adab'],
}
*/
```

```javascript title="Cifrar un JSONURL con función hash, hash y URL cargado"
myErc725.encodeData([
  {
    keyName: 'LSP3Profile',
    value: {
      hashFunction: 'keccak256(utf8)',
      hash: '0x820464ddfac1bec070cc14a8daf04129871d458f2ca94368aae8391311af6361',
      url: 'ipfs://QmYr1VJLwerg6pEoscdhVGugo39pa6rycEZLjtRPDfW84UAx',
    },
  },
]);
/**
{
  keys: ['0x5ef83ad9559033e6e941db7d7c495acdce616347d28e90c7ce47cbfcfcad3bc5'],
  values: ['0x6f357c6a820464ddfac1bec070cc14a8daf04129871d458f2ca94368aae8391311af6361696670733a2f2f516d597231564a4c776572673670456f73636468564775676f3339706136727963455a4c6a7452504466573834554178'],
}
*/
```

```javascript title="Cifrar claves dinámicas"
const schemas = [
  {
    name: 'DynamicKey:<address>',
    key: '0x0fb367364e1852abc5f20000<address>',
    keyType: 'Mapping',
    valueType: 'bytes',
    valueContent: 'Address',
  },
];

myErc725.encodeData(
  [
    {
      keyName: 'DynamicKey:<address>',
      dynamicKeyParts: ['0xbedbedbedbedbedbedbedbedbedbedbedbedbedb'],
      value: '0xcafecafecafecafecafecafecafecafecafecafe',
    },
  ],
  schemas,
);
/**
{
  keys: ['0x0fb367364e1852abc5f20000bedbedbedbedbedbedbedbedbedbedbedbedbedb'],
  values: ['0xcafecafecafecafecafecafecafecafecafecafe]
}
*/

const schemas = [
  {
    name: 'DynamicKey:<bytes4>:<string>',
    key: '0xForDynamicKeysThisFieldIsIrrelevantAndWillBeOverwriten',
    keyType: 'Mapping',
    valueType: 'bytes',
    valueContent: 'Address',
  },
];

myErc725.encodeData(
  [
    {
      keyName: 'DynamicKey:<bytes4>:<string>',
      dynamicKeyParts: ['0x11223344', 'Summer'],
      value: '0xcafecafecafecafecafecafecafecafecafecafe',
    },
  ],
  schemas,
);
/**
{
  keys: ['0x0fb367364e1852abc5f2000078c964cd805233eb39f2db152340079088809725'],
  values: ['0xcafecafecafecafecafecafecafecafecafecafe']
}
*/
```

```javascript title="Cifrar varias claves a la vez"
myErc725.encodeData([
  {
    keyName: 'LSP3Profile',
    value: {
      hashFunction: 'keccak256(utf8)',
      hash: '0x820464ddfac1bec070cc14a8daf04129871d458f2ca94368aae8391311af6361',
      url: 'ipfs://QmYr1VJLwerg6pEoscdhVGugo39pa6rycEZLjtRPDfW84UAx',
    },
  },
  {
    keyName: 'LSP12IssuedAssets[]',
    value: [
      '0xD94353D9B005B3c0A9Da169b768a31C57844e490',
      '0xDaea594E385Fc724449E3118B2Db7E86dFBa1826',
    ],
  },
  {
    keyName: 'LSP1UniversalReceiverDelegate',
    value: '0x1183790f29BE3cDfD0A102862fEA1a4a30b3AdAb',
  },
]);
/**
{
  keys: [
    '0x5ef83ad9559033e6e941db7d7c495acdce616347d28e90c7ce47cbfcfcad3bc5',
    '0x7c8c3416d6cda87cd42c71ea1843df28ac4850354f988d55ee2eaa47b6dc05cd',
    '0x7c8c3416d6cda87cd42c71ea1843df2800000000000000000000000000000000',
    '0x7c8c3416d6cda87cd42c71ea1843df2800000000000000000000000000000001',
    '0x0cfc51aec37c55a4d0b1a65c6255c4bf2fbdf6277f3cc0730c45b828b6db8b47',
  ],
  values: [
    '0x6f357c6a820464ddfac1bec070cc14a8daf04129871d458f2ca94368aae8391311af6361696670733a2f2f516d597231564a4c776572673670456f73636468564775676f3339706136727963455a4c6a7452504466573834554178',
    '0x0000000000000000000000000000000000000000000000000000000000000002',
    '0xd94353d9b005b3c0a9da169b768a31c57844e490',
    '0xdaea594e385fc724449e3118b2db7e86dfba1826',
    '0x1183790f29be3cdfd0a102862fea1a4a30b3adab',
  ],
}
*/
```

---

## encodeKeyName

```js
ERC725.encodeKeyName(keyName [, dynamicKeyParts]);
```

Convierte en hash un nombre de clave para su uso en un [contrato ERC725Y](https://github.com/ethereum/EIPs/blob/master/EIPS/eip-725.md#erc725y) de acuerdo con el [Esquema Estándar LSP2 ERC725Y JSON](https://github.com/lukso-network/LIPs/blob/main/LSPs/LSP-2-ERC725YJSONSchema.md).

:::info

`encodeKeyName` está disponible como método estático o no estático, por lo que puede invocarse sin instanciar un objeto ERC725.

:::

#### Parámetros

##### 1. `keyName` - Cadena

El nombre de la clave que quieres cifrar, por ejemplo: `LSP3Profile`.

##### 2. `dynamicKeyParts` - Cadena o conjunto de Cadenas (opcional)

Las variables utilizadas para codificar el nombre de la clave, si el nombre de la clave es dinámico (por ejemplo: `MyKey:<dirección>`...)

#### Devuelve

| Nombre           | Tipo   | Descripción                                             |
| :--------------- | :----- | :------------------------------------------------------ |
| `encodedKeyName` | cadena | El hash keccak256 del nombre de la clave proporcionada. |

El hash debe poder recuperarse del contrato ERC725Y a través de la función [getData](#getdata).

#### Ejemplo

```javascript title="Codificar el nombre de la clave"
ERC725.encodeKeyName('LSP3Profile');
// '0x5ef83ad9559033e6e941db7d7c495acdce616347d28e90c7ce47cbfcfcad3bc5'

ERC725.encodeKeyName('SupportedStandards:LSP3UniversalProfile');
// '0xeafec4d89fa9619884b60000abe425d64acd861a49b8ddf5c0b6962110481f38'

ERC725.encodeKeyName(
  'AddressPermissions:Permissions:cafecafecafecafecafecafecafecafecafecafe',
);
// '0x4b80742de2bf82acb3630000cafecafecafecafecafecafecafecafecafecafe'

ERC725.encodeKeyName('MyKeyName:<bool>', 'true');
// '0x35e6950bc8d21a1699e500000000000000000000000000000000000000000001'

ERC725.encodeKeyName('MyKeyName:<bytes2>:<uint32>', ['ffff', '4081242941']);
// 0x35e6950bc8d20000ffff000000000000000000000000000000000000f342d33d

ERC725.encodeKeyName('MyKeyName:<uint32>', ['4081242941']);
// 0x35e6950bc8d21a1699e5000000000000000000000000000000000000f342d33d

// This method is also available on the instance:
myErc725.encodeKeyName('LSP3Profile');
```

---

## decodeMappingKey

```js
ERC725.decodeMappingKey(keyNameOrSchema, keyHash);
```

Decodificar los valores de las partes dinámicas de una clave hash utilizada en un [contrato ERC725Y](https://github.com/ethereum/EIPs/blob/master/EIPS/eip-725.md#erc725y) de acuerdo con el [Esquema Estándar LSP2 ERC725Y JSON](https://github.com/lukso-network/LIPs/blob/main/LSPs/LSP-2-ERC725YJSONSchema.md).

:::info

`decodeMappingKey` está disponible como método estático o no estático, por lo que puede invocarse sin instanciar un objeto ERC725.

:::

#### Parámetros

##### 1. `keyHash` - Cadena

El hash de la clave bytes32 que debe descodificarse

##### 2. `keyNameOrSchema` - Cadena o ERC725JSONSchema

El nombre de la clave o esquema erc725y json asociado al hash de la clave a decodificar, por ejemplo: `MySuperKey: <dirección>`.

#### Devuelve

| Nombre            | Tipo                                                | Descripción                                                                  |
| :---------------- | :-------------------------------------------------- | :--------------------------------------------------------------------------- |
| `dynamicKeyParts` | {type: cadena, valor: cadena O número O booleano}[] | Las partes de la clave dinámica decodificadas a partir del hash de la clave. |

#### Ejemplo

```javascript title=" Decodificar la clave de mapeo"
ERC725.decodeMappingKey(
  '0x35e6950bc8d21a1699e50000cafecafecafecafecafecafecafecafecafecafe',
  'MyKeyName:<address>',
);
// [{
//   type: 'address',
//   value: '0xCAfEcAfeCAfECaFeCaFecaFecaFECafECafeCaFe'
// }]

ERC725.decodeMappingKey(
  '0x35e6950bc8d21a1699e5000000000000000000000000000000000000f342d33d',
  'MyKeyName:<uint32>',
);
// [{ type: 'uint32', value: 4081242941 }]

ERC725.decodeMappingKey(
  '0x35e6950bc8d21a1699e5000000000000000000000000000000000000abcd1234',
  'MyKeyName:<bytes4>',
);
// [{ type: 'bytes4', value: 'abcd1234' }]

ERC725.decodeMappingKey(
  '0x35e6950bc8d21a1699e50000aaaabbbbccccddddeeeeffff1111222233334444',
  'MyKeyName:<bytes32>',
);
// [{
//   type: 'bytes32',
//   value: 'aaaabbbbccccddddeeeeffff1111222233334444'
// }]

ERC725.decodeMappingKey(
  '0x35e6950bc8d21a1699e500000000000000000000000000000000000000000001',
  'MyKeyName:<bool>',
);
// [{ type: 'bool', value: true }]

ERC725.decodeMappingKey(
  '0x35e6950bc8d20000ffff000000000000000000000000000000000000f342d33d',
  'MyKeyName:<bytes2>:<uint32>',
);
// [
//   { type: 'bytes2', value: 'ffff' },
//   { type: 'uint32', value: 4081242941 }
// ]

// Este método también está disponible en la instancia:
myErc725.decodeMappingKey(
  '0x35e6950bc8d20000ffff000000000000000000000000000000000000f342d33d',
  'MyKeyName:<bytes2>:<uint32>',
);
```

---

## encodePermissions

```js
ERC725.encodePermissions(permissions);
```

Codifica los permisos en una cadena hexadecimal tal y como se define en el [Estándar LSP6 KeyManager](https://docs.lukso.tech/standards/universal-profile/lsp6-key-manager).

:::info

`encodePermissions` está disponible como método estático o no estático, por lo que puede invocarse sin instanciar un objeto ERC725.

:::

#### Parámetros

##### 1. `permissions` - Objeto

Un objeto con [LSP6 KeyManager Permissions] como claves y un `boolean` como valor. Cualquier permiso omitido será por defecto `false`.

#### Devuelve

| Tipo   | Descripción                                                                               |
| :----- | :---------------------------------------------------------------------------------------- |
| cadena | Los permisos codificados como una cadena hexadecimal definida por el [Estándar del Gestor de Claves LSP6] |

#### Ejemplo

```javascript title="Codificación de permisos"
ERC725.encodePermissions({
  CHANGEOWNER: false,
  ADDCONTROLLER: false,
  CHANGEPERMISSIONS: false,
  ADDEXTENSIONS: false,
  CHANGEEXTENSIONS: true,
  ADDUNIVERSALRECEIVERDELEGATE: false,
  CHANGEUNIVERSALRECEIVERDELEGATE: false,
  REENTRANCY: false,
  SUPER_TRANSFERVALUE: true,
  TRANSFERVALUE: true,
  SUPER_CALL: false,
  CALL: true,
  SUPER_STATICCALL: false,
  STATICCALL: false,
  SUPER_DELEGATECALL: false,
  DELEGATECALL: false,
  DEPLOY: false,
  SUPER_SETDATA: false,
  SETDATA: false,
  ENCRYPT: false,
  DECRYPT: false,
  SIGN: false,
}),
// '0x0000000000000000000000000000000000000000000000000000000000000110'

// Any ommited Permissions will default to false
ERC725.encodePermissions({
  ADDCONTROLLER: true,
  ADDEXTENSIONS: true,
}),
// '0x000000000000000000000000000000000000000000000000000000000000000a'
ERC725.encodePermissions({
  CHANGEPERMISSIONS: true,
  CHANGEEXTENSIONS: true,
  CHANGEUNIVERSALRECEIVERDELEGATE: true,
  SETDATA: true,
}),
// '0x0000000000000000000000000000000000000000000000000000000000040054'


// This method is also available on the instance:
myErc725.encodePermissions({
  CHANGEPERMISSIONS: true,
  SETDATA: true,
}),
```

---

## fetchData

```js
myErc725.fetchData([keys]);
```

La función `fetchData` obtiene datos de contratos inteligentes y puede devolver además datos [`JSONURL`](https://github.com/lukso-network/LIPs/blob/master/LSPs/LSP-2-ERC725YJSONSchema.md#jsonurl) o [`ASSETURL`](https://github.com/lukso-network/LIPs/blob/master/LSPs/LSP-2-ERC725YJSONSchema.md#asseturl) de puntos finales IPFS, HTTP o HTTPS.

:::info

Para garantizar la **autenticidad de los datos**, `fetchData` compara el `hash` del JSON obtenido con el `hash` almacenado en la cadena de bloques.

:::

:::info

Si recibes el error `ReferenceError: fetch is not defined`, necesitas instalar e importar [`isomorphic-fetch`](https://www.npmjs.com/package/isomorphic-fetch).

:::

#### Parámetros

##### 1. `keys` - Cadena, Objeto o conjunto de Cadenas y/o Objetos (opcional)

El/los nombre(s) (o el/los nombre(s) codificado(s) como clave de esquema) del/de los elemento(s) en el esquema del contrato inteligente. Si no se establecen claves, se obtendrán todas las claves de esquema no dinámicas dadas en la instanciación. Para claves dinámicas, puede utilizar el objeto siguiente:

| Nombre            | Tipo                          | Descripción                                                                |
| :---------------- | :---------------------------- | :------------------------------------------------------------------------- |
| `keyName`         | cadena                        | El nombre de la clave dinámica, como `MyKey:<dirección>`.                  |
| `dynamicKeyParts` | cadena o <br/> cadena[&nbsp;] | Las partes dinámicas del `keyName` que se utilizarán para cifrar la clave. |

#### Devuelve

| Nombre | Tipo                                       | Descripción                                                                                                                                                                                                                              |
| :----- | :----------------------------------------- | :--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| datos  | `Promise<Array>` o <br/> `Promise<Object>` | Un conjunto con los mismos objetos que para la función [`decodeData()`](./ERC725#decodedata) pero con el valor sustituido por el archivo real para `JSONURL` y `ASSETURL` valueContent. Si el hash no coincide, el valor será "null". |

:::info

- Si la entrada es un conjunto, los valores se devolverán en un conjunto.
- Si la entrada es una sola clave, la salida será directamente el objeto.

:::

#### Ejemplo de todas las claves

```javascript title="Recibiendo todas las claves del esquema"
await myErc725.fetchData();
/**
[
  {
    name: 'SupportedStandards:LSP3UniversalProfile',
    key: '0xeafec4d89fa9619884b60000abe425d64acd861a49b8ddf5c0b6962110481f38',
    value: '0xabe425d6'
  },
  {
    name: 'LSP3Profile',
    key: '0x5ef83ad9559033e6e941db7d7c495acdce616347d28e90c7ce47cbfcfcad3bc5',
    value: { LSP3Profile: [Object] }
  },
  {
    name: 'LSP1UniversalReceiverDelegate',
    key: '0x0cfc51aec37c55a4d0b1a65c6255c4bf2fbdf6277f3cc0730c45b828b6db8b47',
    value: '0xE2D6038acD92200790Df695Ebd13856CdF2a6942'
  },
  {
    name: 'LSP12IssuedAssets[]',
    key: '0x7c8c3416d6cda87cd42c71ea1843df28ac4850354f988d55ee2eaa47b6dc05cd',
    value: [
      '0xc444009d38d3046bb0cF81Fa2Cd295ce46A67C78',
      '0x4fEbC3491230571F6e1829E46602e3b110215A2E',
      '0xB92a8DdA288638491AEE5C2a003D4CAbfa47aE3F',
      '0x1e52e7F1707dcda57dD33F003B2311652A465acA',
      '0x0BDA71aA980D37Ea56E8a3784E4c309101DAf3E4',
      '0xfDB4D9C299438B9839e9d04E34B9609C5b56600D',
      '0x081D3F0bff8ae2339cb65113822eEc1510704d5c',
      '0x55C98c6944B7497FaAf4db0386a1aD1E6efF526E',
      '0x90D1a1D68fa23AEEE991220703f1a1C3782e0b35',
      '0xdB5AB19792d9fB61c1Dff57810Fb7C6f839Af8ED'
    ]
  }
]
*/
```

#### Single-Key Example

```javascript title="Receiving one key from the schema"
await myErc725.fetchData('LSP3Profile');
/**
{
  key: '0x5ef83ad9559033e6e941db7d7c495acdce616347d28e90c7ce47cbfcfcad3bc5',
  name: 'LSP3Profile',
  value: { LSP3Profile: { name: 'Test', description: 'Cool' } }
}
*/
await myErc725.fetchData(['LSP1UniversalReceiverDelegate']);
/**
[
  {
    name: 'LSP1UniversalReceiverDelegate',
    key: '0x0cfc51aec37c55a4d0b1a65c6255c4bf2fbdf6277f3cc0730c45b828b6db8b47',
    value: '0xE2D6038acD92200790Df695Ebd13856CdF2a6942'
  }
]
*/
```

#### Ejemplo de Claves Múltiples / Claves Dinámicas

```javascript title="Recibiendo múltiples claves del esquema"
await myErc725.fetchData(['LSP3Profile', 'LSP1UniversalReceiverDelegate']);
/**
[
  {
    name: 'LSP3Profile',
    key: '0x5ef83ad9559033e6e941db7d7c495acdce616347d28e90c7ce47cbfcfcad3bc5',
    value: { LSP3Profile: [Object] }
  },
  {
    name: 'LSP1UniversalReceiverDelegate',
    key: '0x0cfc51aec37c55a4d0b1a65c6255c4bf2fbdf6277f3cc0730c45b828b6db8b47',
    value: '0xE2D6038acD92200790Df695Ebd13856CdF2a6942'
  }
]
*/

await myErc725.fetchData([
  'LSP1UniversalReceiverDelegate',
  {
    keyName: 'LSP12IssuedAssetsMap:<address>',
    dynamicKeyParts: '0xcafecafecafecafecafecafecafecafecafecafe',
  },
]);
/**
[
  {
    name: 'LSP1UniversalReceiverDelegate',
    key: '0x0cfc51aec37c55a4d0b1a65c6255c4bf2fbdf6277f3cc0730c45b828b6db8b47',
    value: '0xE2D6038acD92200790Df695Ebd13856CdF2a6942'
  },
  {
    name: 'LSP12IssuedAssetsMap:cafecafecafecafecafecafecafecafecafecafe',
    key: '0x74ac2555c10b9349e78f0000cafecafecafecafecafecafecafecafecafecafe',
    value: null
  }
]
*/
```

---

## getData

```js
myErc725.getData([keys]);
```

Obtiene **datos decodificados** de una, varias o todas las claves del contrato inteligente `ERC725` especificado.
Si se omite el parámetro `keys`, devolverá todas las claves (según la definición `ERC725JSONSchema`).

:::caution

- Los datos devueltos por esta función no contienen datos externos de [`JSONURL`](https://github.com/lukso-network/LIPs/blob/master/LSPs/LSP-2-ERC725YJSONSchema.md#jsonurl)
  o [`ASSETURL`](https://github.com/lukso-network/LIPs/blob/master/LSPs/LSP-2-ERC725YJSONSchema.md#asseturl).
- Si quieres recibirlo todo de una sola vez, puedes utilizar [`fetchData`](ERC725.md#fetchdata).

:::

#### Parámetros

##### 1. `keys` - Cadena, Objeto o conjunto de Cadenas y/u Objetos (opcional)

El/los nombre(s) (o el/los nombre(s) codificado(s) como clave de esquema) del/de los elemento(s) en el esquema del contrato inteligente. Si no se establecen claves, se obtendrán todas las claves de esquema no dinámicas dadas en la instanciación. Para claves dinámicas, puedes utilizar el siguiente objeto:

| Nomb              | Tipo                          | Descripción                                                                |
| :---------------- | :---------------------------- | :------------------------------------------------------------------------- |
| `keyName`         | cadena                        | El nombre de la clave dinámica, como `MyKey:<dirección>`.                  |
| `dynamicKeyParts` | cadena o <br/> cadena[&nbsp;] | Las partes dinámicas del `keyName` que se utilizarán para cifrar la clave. |

#### Devuelve

| Nombre | Tipo                                          | Descripción                                                                                   |
| :----- | :-------------------------------------------- | :-------------------------------------------------------------------------------------------- |
| datos  | `Promise<Conjunto>` o <br/> `Promise<Objeto>` | Un conjunto con los mismos objetos que para la función [`decodeData()`](./ERC725#decodedata). |

:::info

- Si la entrada es un conjunto, los valores se devolverán en un conjunto.
- Si la entrada es una sola clave, la salida será directamente el objeto.

:::

#### Ejemplo de todas las claves

```javascript title="Recibiendo todas las claves del esquema"
await myErc725.getData();
/**
[
  {
    name: 'SupportedStandards:LSP3UniversalProfile',
    key: '0xeafec4d89fa9619884b60000abe425d64acd861a49b8ddf5c0b6962110481f38',
    value: '0xabe425d6',
  },
  {
    name: 'LSP1UniversalReceiverDelegate',
    key: '0x0cfc51aec37c55a4d0b1a65c6255c4bf2fbdf6277f3cc0730c45b828b6db8b47',
    value: '0x50A02EF693fF6961A7F9178d1e53CC8BbE1DaD68',
  },
  {
    name: 'LSP12IssuedAssets[]',
    key: '0x7c8c3416d6cda87cd42c71ea1843df28ac4850354f988d55ee2eaa47b6dc05cd',
    value: [
      '0xc444009d38d3046bb0cF81Fa2Cd295ce46A67C78',
      '0x4fEbC3491230571F6e1829E46602e3b110215A2E',
      '0xB92a8DdA288638491AEE5C2a003D4CAbfa47aE3F',
      '0x1e52e7F1707dcda57dD33F003B2311652A465acA',
      '0x0BDA71aA980D37Ea56E8a3784E4c309101DAf3E4',
      '0xfDB4D9C299438B9839e9d04E34B9609C5b56600D',
      '0x081D3F0bff8ae2339cb65113822eEc1510704d5c',
      '0x55C98c6944B7497FaAf4db0386a1aD1E6efF526E',
      '0x90D1a1D68fa23AEEE991220703f1a1C3782e0b35',
      '0xdB5AB19792d9fB61c1Dff57810Fb7C6f839Af8ED'
    ],
  },
  {
    name: 'LSP3Profile',
    key: '0x5ef83ad9559033e6e941db7d7c495acdce616347d28e90c7ce47cbfcfcad3bc5',
    value: {
      hashFunction: 'keccak256(utf8)',
      hash: '0x70546a2accab18748420b63c63b5af4cf710848ae83afc0c51dd8ad17fb5e8b3',
      url: 'ipfs://QmecrGejUQVXpW4zS948pNvcnQrJ1KiAoM6bdfrVcWZsn5',
    },
  },
]
*/
```

#### Ejemplo de Clave Única

```javascript title="Recibiendo una clave del esquema"
await myErc725.getData('LSP3Profile');
/**
{
  name: 'LSP3Profile',
  key: '0x5ef83ad9559033e6e941db7d7c495acdce616347d28e90c7ce47cbfcfcad3bc5',
  value: {
    hashFunction: 'keccak256(utf8)',
    hash: '0xd96ff7776660095f661d16010c4349aa7478a9129ce0670f771596a6ff2d864a',
    url: 'ipfs://QmbTmcbp8ZW23vkQrqkasMFqNg2z1iP4e3BCUMz9PKDsSV'
  },
}
*/

await myErc725.getData(['LSP3Profile']);
/**
[
  {
    name: 'LSP3Profile',
    key: '0x5ef83ad9559033e6e941db7d7c495acdce616347d28e90c7ce47cbfcfcad3bc5',
    value: {
      hashFunction: 'keccak256(utf8)',
      hash: '0xd96ff7776660095f661d16010c4349aa7478a9129ce0670f771596a6ff2d864a',
      url: 'ipfs://QmbTmcbp8ZW23vkQrqkasMFqNg2z1iP4e3BCUMz9PKDsSV'
    },
  }
]
*/

await myErc725.getData('LSP1UniversalReceiverDelegate');
/**
{
  name: 'LSP1UniversalReceiverDelegate',
  key: '0cfc51aec37c55a4d0b1a65c6255c4bf2fbdf6277f3cc0730c45b828b6db8b47',
  value: '0x50A02EF693fF6961A7F9178d1e53CC8BbE1DaD68',
}
*/
```

#### Ejemplo Multi-Clave

```javascript title="Recibiendo múltiples claves del esquema"
await myErc725.getData(['LSP3Profile', 'LSP1UniversalReceiverDelegate']);
/**
[
  {
    name: 'LSP3Profile',
    key: '0x5ef83ad9559033e6e941db7d7c495acdce616347d28e90c7ce47cbfcfcad3bc5',
    value: {
      hashFunction: 'keccak256(utf8)',
      hash: '0xeeafeebeb416923dfb0dcf4c66b045c72742121ce2a06f93ae044ee0efb70777',
      url: 'ipfs://QmZnG5Z5B5Dq8iFFtsL5i7AnrgH16P4DJ8UhY7j8RzX51p'
    }
  },
  {
    name: 'LSP1UniversalReceiverDelegate',
    key: '0x0cfc51aec37c55a4d0b1a65c6255c4bf2fbdf6277f3cc0730c45b828b6db8b47',
    value: '0xE2D6038acD92200790Df695Ebd13856CdF2a6942'
  }
]
*/
```

#### Ejemplo de Clave Dinámica

```javascript title=" Recibiendo claves dinámicas del esquema"
await myErc725.getData({
  keyName: 'LSP12IssuedAssetsMap:<address>',
  dynamicKeyParts: '0xcafecafecafecafecafecafecafecafecafecafe',
});
/**
{
  name: 'LSP12IssuedAssetsMap:cafecafecafecafecafecafecafecafecafecafe',
  key: '0x74ac2555c10b9349e78f0000cafecafecafecafecafecafecafecafecafecafe',
  value: '0x6b175474e89094c44da98b954eedeac495271d0f',
}
*/

await myErc725.getData([
  {
    keyName: 'LSP12IssuedAssetsMap:<address>',
    dynamicKeyParts: '0xcafecafecafecafecafecafecafecafecafecafe',
  },
]);
/**
[
  {
    name: 'LSP12IssuedAssetsMap:cafecafecafecafecafecafecafecafecafecafe',
    key: '0x74ac2555c10b9349e78f0000cafecafecafecafecafecafecafecafecafecafe',
    value: '0x6b175474e89094c44da98b954eedeac495271d0f',
  }
]
*/
```

```javascript title="Recibiendo claves dinámicas del esquema"
await myErc725.getData([
  'LSP3Profile',
  {
    keyName: 'LSP12IssuedAssetsMap:<address>',
    dynamicKeyParts: '0xcafecafecafecafecafecafecafecafecafecafe',
  },
]);
/**
[
  {
    name: 'LSP3Profile',
    key: '0x5ef83ad9559033e6e941db7d7c495acdce616347d28e90c7ce47cbfcfcad3bc5',
    value: {
      hashFunction: 'keccak256(utf8)',
      hash: '0xeeafeebeb416923dfb0dcf4c66b045c72742121ce2a06f93ae044ee0efb70777',
      url: 'ipfs://QmZnG5Z5B5Dq8iFFtsL5i7AnrgH16P4DJ8UhY7j8RzX51p'
    }
  },
  {
    name: 'LSP12IssuedAssetsMap:cafecafecafecafecafecafecafecafecafecafe',
    key: '0x74ac2555c10b9349e78f0000cafecafecafecafecafecafecafecafecafecafe',
    value: null
  }
]
*/
```

---

## getOwner

```js
myErc725.getOwner([address]);
```

Devuelve el propietario del contrato y no está directamente relacionado con las especificaciones ERC725.

#### Parámetros

##### 1. `address` - Cadena (opcional)

La dirección del contrato cuyo propietario quieres encontrar. Si no se establece ninguna dirección, devolverá el propietario del contrato utilizado para inicializar la clase ERC725.

#### Devuelve

| Nombre    | Tipo   | Descripción                                            |
| :-------- | :----- | :----------------------------------------------------- |
| `Promise` | cadena | La dirección del contrato o de la EOA del propietario. |

:::info

La dirección del propietario del contrato almacenada en el contrato.

:::

#### Ejemplo

```javascript title=" Recibiendo la dirección del propietario"
// Si no se establece ninguna dirección, devolverá el propietario del contrato utilizado para inicializar la clase ERC725().
await myErc725.getOwner();
// '0x94933413384997F9402cc07a650e8A34d60F437A'

// También puedes obtener el propietario de un contrato específico estableciendo el parámetro dirección
await myErc725.getOwner('0x3000783905Cc7170cCCe49a4112Deda952DDBe24');
// '0x7f1b797b2Ba023Da2482654b50724e92EB5a7091'
```

---

## getSchema

```js
myErc725.getSchema(keys [, providedSchemas]);
```

Analiza una clave hasheada o una lista de claves hasheadas e intentará devolver su correspondiente objeto [LSP2 ERC725YJSONSchema](https://github.com/lukso-network/LIPs/blob/main/LSPs/LSP-2-ERC725YJSONSchema.md). Además, buscará la clave correspondiente dentro de los esquemas:

- en la carpeta [`schemas`](https://github.com/ERC725Alliance/myErc725.js/tree/main/schemas) (que incluye todos los [LSPs](https://github.com/lukso-network/LIPs/tree/main/LSPs)),
- que se proporcionaron en la inicialización de ERC725, y
- que se proporcionaron en la llamada a la función (`providedSchemas`).

#### Parámetros

##### 1. `keys` - Cadena o conjunto de Cadenas

La(s) clave(s) para la(s) que está intentando obtener el esquema.

##### 2. `providedSchemas` - Objeto (opcional)

Un conjunto de objetos extra [LSP-2 ERC725YJSONSchema] que pueden ser utilizados para encontrar el esquema.

#### Devuelve

| Nombre   | Tipo                | Descripción                                                                 |
| :------- | :------------------ | :-------------------------------------------------------------------------- |
| `result` | ERC725JSONSchema    | Si el parámetro `keys` es una cadena y se ha encontrado el esquema.         |
| `result` | Cadena de registro  | Si el parámetro `keys` es una cadena[&nbsp;] y se ha encontrado el esquema. |
| `result` | null                | Si el esquema no se ha encontrado.                                          |

#### Ejemplo utilizando un esquema LSP3 predefinido

```javascript title="Análisis de la clave hash del esquema LSP3"
myErc725.getSchema(
  '0x5ef83ad9559033e6e941db7d7c495acdce616347d28e90c7ce47cbfcfcad3bc5',
);
/**
{
  name: 'LSP3Profile',
  key: '0x5ef83ad9559033e6e941db7d7c495acdce616347d28e90c7ce47cbfcfcad3bc5',
  keyType: 'Singleton',
  valueContent: 'JSONURL',
  valueType: 'bytes'
}
*/
myErc725.getSchema([
  '0x5ef83ad9559033e6e941db7d7c495acdce616347d28e90c7ce47cbfcfcad3bc5',
  '0x3a47ab5bd3a594c3a8995f8fa58d087600000000000000000000000000000001',
]);
/**
{
  '0x5ef83ad9559033e6e941db7d7c495acdce616347d28e90c7ce47cbfcfcad3bc5': {
    name: 'LSP3Profile',
    key: '0x5ef83ad9559033e6e941db7d7c495acdce616347d28e90c7ce47cbfcfcad3bc5',
    keyType: 'Singleton',
    valueContent: 'JSONURL',
    valueType: 'bytes'
  },
  '0x3a47ab5bd3a594c3a8995f8fa58d087600000000000000000000000000000001': {
    name: 'LSP12IssuedAssets[1]',
    key: '0x7c8c3416d6cda87cd42c71ea1843df28ac4850354f988d55ee2eaa47b6dc05cd',
    keyType: 'Singleton',
    valueContent: 'Address',
    valueType: 'address'
  }
}
*/
```

#### Ejemplo usando un esquema personalizado

```javascript title="Análisis de la clave hash de un esquema personalizado"
myErc725.getSchema(
  '0x777f55baf2e0c9f73d3bb456dfb8dbf6e609bf557969e3184c17ff925b3c402c',
  [
    {
      name: 'ParameterSchema',
      key: '0x777f55baf2e0c9f73d3bb456dfb8dbf6e609bf557969e3184c17ff925b3c402c',
      keyType: 'Singleton',
      valueContent: 'JSONURL',
      valueType: 'bytes',
    },
  ],
);
/**
{
  name: 'ParameterSchema',
  key: '0x777f55baf2e0c9f73d3bb456dfb8dbf6e609bf557969e3184c17ff925b3c402c',
  keyType: 'Singleton',
  valueContent: 'JSONURL',
  valueType: 'bytes',
}
*/
```

---

## isValidSignature

```js
myErc725.isValidSignature(messageOrHash, signature);
```

Comprueba si una firma fue suscrita por el `propietario` del contrato de la Cuenta ERC725, de acuerdo con [EIP-1271](https://eips.ethereum.org/EIPS/eip-1271). Si el `propietario` es un contrato en sí mismo, delegará la llamada a `isValidsignature()` al contrato propietario si es compatible con [EIP-1271](https://eips.ethereum.org/EIPS/eip-1271). En caso contrario, fallará.

#### Parámetros

##### 1. `messageOrHash` - Cadena

Valor de un mensaje o hash que necesita ser verificado.

##### 2. `signature` - Cadena

La firma codificada RLP en bruto.

:::info

- El hash debe tener una longitud de 66 caracteres con el prefijo `0x`, de lo contrario se interpretará como mensaje.
- El mensaje será: envuelto como `"\x19Ethereum Signed Message:\n" + message.length + message` y con hash usando la función `keccak256`.
  La firma se puede generar con [`web3.eth.accounts.sign()`](https://web3js.readthedocs.io/en/v1.2.11/web3-eth-accounts.html#sign).

:::

#### Devuelve

| Nombre    | Tipo    | Descripción                                                    |
| :-------- | :------ | :------------------------------------------------------------- |
| `Promise` | boolean | `true` si la firma es válida, `false` si la firma no es válida.|

:::info

- Una firma válida significa que la respuesta del contrato inteligente ES el MAGICVALUE: `0x1626ba7e`.
- Si esta función es llamada en un contrato que no soporta [EIP-1271](https://eips.ethereum.org/EIPS/eip-1271), arrojará un error.

:::

#### Ejemplos

```javascript title="Comprobación de la firma con un mensaje"
await myErc725.isValidSignature(
  'hello',
  '0xb91467e570a6466aa9e9876cbcd013baba02900b8979d43fe208a4a4f339f5fd6007e74cd82e037b800186422fc2da167c747ef045e5d18a5f5d4300f8e1a0291c',
);
// true
```

```javascript title="Comprobación de la firma con un hash"
await myErc725.isValidSignature(
  '0x1da44b586eb0729ff70a73c326926f6ed5a25f5b056e7f47fbc6e58d86871655',
  '0xcafecafeb915466aa9e9876cbcd013baba02900b8979d43fe208a4a4f339f5fd6007e74cd82e037b800186422fc2da167c747ef045e5d18a5f5d4300f8e1a0291c',
);
// false
```

[permisos del gestor de claves lsp6]: ../../../../../../../standards/universal-profile/lsp6-key-manager#permissions
[estándar del Gestor de Claves LSP6]: https://docs.lukso.tech/standards/universal-profile/lsp6-key-manager
[lsp-2 erc725yjsonschema]: https://github.com/lukso-network/LIPs/blob/main/LSPs/LSP-2-ERC725YJSONSchema.md

## supportsInterface

```js
myERC725.supportsInterface(interfaceIdOrName);
```

```js
ERC725.supportsInterface(interfaceIdOrName, options);
```

Puedes utilizar esta función si necesitas comprobar si el objeto ERC725 o un contrato inteligente es compatible con una interfaz específica (por ID o nombre). Cuando utilices la función en tu clase ERC725 instanciada, usará la dirección del contrato y el proveedor proporcionados en la instanciación. En clases no instanciadas, necesitas especificarlos en el parámetro `options`.

:::caution
El `interfaceId` no es la forma más segura de comprobar si existe un estándar, ya que podrían establecerse manualmente.
:::

#### Parámetros

##### 1. `interfaceIdOrName` - Cadena

Puede ser una cadena hexadecimal con el `interfaceID` definido por [ERC165](https://eips.ethereum.org/EIPS/eip-165) o uno de los nombres de interfaz predefinidos:

| interfaceName                   | Estándar                                                                                                                   |
| :------------------------------ | :------------------------------------------------------------------------------------------------------------------------- |
| `ERC1271`                       | [EIP-1271: Método estándar de validación de firmas para contratos](https://eips.ethereum.org/EIPS/eip-1271)                |
| `ERC725X`                       | [EIP-725: Estándar general de ejecución](https://eips.ethereum.org/EIPS/eip-725)                                           |
| `ERC725Y`                       | [EIP-725: Almacén general de valores-clave](https://eips.ethereum.org/EIPS/eip-725)                                        |
| `LSP0ERC725Account`             | [LSP-0: Cuenta ERC725](https://docs.lukso.tech/standards/universal-profile/lsp0-erc725account)                             |
| `LSP1UniversalReceiver`         | [LSP-1: Receptor Universal](https://docs.lukso.tech/standards/generic-standards/lsp1-universal-receiver)                   |
| `LSP1UniversalReceiverDelegate` | [LSP-1: Receptor Delegado Universal](https://docs.lukso.tech/standards/universal-profile/lsp1-universal-receiver-delegate) |
| `LSP6KeyManager`                | [LSP-6: Gestor de Calves](https://docs.lukso.tech/standards/universal-profile/lsp6-key-manager)                            |
| `LSP7DigitalAsset`              | [LSP-7: Activo Digital](https://docs.lukso.tech/standards/nft-2.0/LSP7-Digital-Asset)                                      |
| `LSP8IdentifiableDigitalAsset`  | [LSP-8: Activo Digital Identificable](https://docs.lukso.tech/standards/nft-2.0/LSP8-Identifiable-Digital-Asset)           |
| `LSP9Vault`                     | [LSP-9: Bóveda](https://docs.lukso.tech/standards/universal-profile/lsp9-vault)                                            |

:::info

El `interfaceName` sólo comprobará la última versión del `interfaceID` del estándar, que puede encontrarse en `src/constants/interfaces`. Para los LSP, los `interfaceIDs` se toman de la última versión de la librería [@lukso/lsp-smart-contracts](https://github.com/lukso-network/lsp-smart-contracts).

:::info

##### 2. `options` - Objeto (opcional)

En una clase no instanciada, debes proporcionar un objeto `options`.

| Nombre    | Tipo   | Descripción                                                                      |
| :-------- | :----- | :------------------------------------------------------------------------------- |
| `address` | cadena | Dirección del contrato inteligente para comprobar una determinada interfaz.      |
| `rpcUrl`  | cadena | URL RPC para conectarse a la red en la que se despliega el contrato inteligente. |

#### Devuelve

| Tipo                | Descripción                                                                 |
| :------------------ | :-------------------------------------------------------------------------- |
| `Promise<booleano>` | Devuelve `true` si se ha encontrado la interfaz, en caso contrario `false`. |

#### Ejemplos

```javascript title="Utilizando el ID de interfaz"
myErc725.supportsInterface('0xfd4d5c50');
// true

ERC725.supportsInterface('0xfd4d5c50', {
  address: '0xe408BDDbBAB1985006A2c481700DD473F932e5cB',
  rpcUrl: 'https://rpc.l16.lukso.network',
});
// false
```

```javascript title="Utilizando el nombre de la interfaz"
myErc725.supportsInterface('LSP0ERC725Account');
// false

ERC725.supportsInterface('LSP0ERC725Account', {
  address: '0xe408BDDbBAB1985006A2c481700DD473F932e5cB',
  rpcUrl: 'https://rpc.l16.lukso.network',
});
// true
```
